# PRD: Stop Hook 会话隔离

## 需求来源

用户反馈：多个 Claude 会话在同一项目工作时发生"串线"。

## 功能描述

修复 Stop Hook 的会话隔离问题：检查 `.dev-mode` 中记录的分支是否与当前分支匹配。

## 涉及文件

- `hooks/stop.sh` - 添加分支匹配检查
- `regression-contract.yaml` - 添加 H7-005 RCI
- `tests/hooks/stop-hook.test.ts` - 添加测试

## 成功标准

1. Stop Hook 只处理当前分支的 `.dev-mode` 文件
2. 多个 Claude 会话在不同分支工作时不会互相干扰
3. 有自动化测试覆盖

## 非目标

- 不修改 `.dev-mode` 文件格式
