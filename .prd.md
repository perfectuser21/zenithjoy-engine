---
id: prd-devgate-push-metrics
version: 1.0.0
created: 2026-01-22
updated: 2026-01-22
changelog:
  - 1.0.0: 初始版本
---

# PRD - DevGate Metrics 推送脚本

## 需求来源

DevGate metrics 收集脚本（metrics.cjs）已存在，但缺少推送到 Core API 的功能。
需要完成闭环：收集 → 推送 → 展示。

## 功能描述

创建推送脚本 push-metrics.sh：
1. 调用 metrics.cjs 收集数据
2. 转换为 Core API 需要的格式
3. POST 到 /api/devgate/metrics
4. 支持 dry-run 模式
5. 支持从 ~/.credentials/devgate.env 读取 token

## 成功标准

- push-metrics.sh 可以成功推送 metrics 到 Core
- Core /devgate 页面可以展示推送的数据
- 支持 --dry-run 预览数据
