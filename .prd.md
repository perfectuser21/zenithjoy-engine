---
id: prd-remove-ralph-loop
version: 1.0.0
created: 2026-01-29
---

# 移除 Ralph Loop，统一用 Stop Hook

## 目标
清理所有 Ralph Loop 引用，用 Stop Hook 统一循环控制机制

## 问题清单

### 1. .dev-mode 创建时机错误
- 当前：Step 1 创建（此时还在 develop）
- 问题：分支名错误，且 Step 3 worktree 检查会误判
- 修复：移到 Step 3 分支创建后

### 2. Ralph Loop 引用残留
- 08-pr.md：提到 Ralph Loop 和 p0 阶段
- 09-ci.md：整个文件基于 Ralph Loop
- 07-quality.md：混合提到两种机制

### 3. 完成条件描述不一致
- 08-pr.md 说 "PR 创建后结束"
- Stop Hook 要求 "PR 合并后结束"

## 涉及文件
- skills/dev/steps/01-prd.md（移除 .dev-mode 创建）
- skills/dev/steps/03-branch.md（添加 .dev-mode 创建）
- skills/dev/steps/07-quality.md（移除 Ralph Loop 引用）
- skills/dev/steps/08-pr.md（移除 Ralph Loop，更新完成条件）
- skills/dev/steps/09-ci.md（重写为 Stop Hook 逻辑）

## 成功标准
- [ ] 所有 Ralph Loop 引用已移除
- [ ] .dev-mode 在 Step 3 分支创建后创建
- [ ] 完成条件统一为 "PR 合并后结束"
- [ ] 文档描述一致
