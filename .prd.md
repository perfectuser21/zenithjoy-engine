# PRD: 分支级别的 PRD/DoD 文件命名

## 问题描述

### 现状
- `.prd.md` 和 `.dod.md` 是 repo 级别的全局文件
- 多个会话在同一 repo 工作（或跨 repo 操作）时会互相覆盖
- 导致会话串线，PRD/DoD 内容混乱

### 目标
改成按分支命名：`.prd-{分支名}.md`、`.dod-{分支名}.md`

## 功能描述

将所有引用 `.prd.md` 和 `.dod.md` 的地方改为动态获取分支名，使用 `.prd-{BRANCH}.md` 和 `.dod-{BRANCH}.md` 格式。

### 需要修改的文件

1. **hooks/branch-protect.sh** - 分支保护检查
2. **hooks/pr-gate-v2.sh** - PR 前质检
3. **skills/dev/scripts/cleanup.sh** - 清理脚本
4. **.gitignore** - 忽略规则

### 命名逻辑

```bash
BRANCH=$(git branch --show-current 2>/dev/null)
PRD_FILE=".prd-${BRANCH}.md"
DOD_FILE=".dod-${BRANCH}.md"
```

## 成功标准

1. 多个分支可以独立拥有各自的 PRD/DoD 文件
2. Hook 正确检测当前分支对应的 PRD/DoD
3. cleanup 正确清理当前分支的 PRD/DoD
4. .gitignore 正确忽略所有分支的 PRD/DoD 文件
5. 现有测试通过

## 验收场景

```
workspace/
├── .prd-cp-cleanup.md           ← cleanup 任务
├── .dod-cp-cleanup.md
├── .prd-cp-task-system.md       ← task-system 任务
├── .dod-cp-task-system.md
└── ...
```

多个窗口互不干扰。
