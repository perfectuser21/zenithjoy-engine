---
id: prd-test-full-flow
version: 1.0.0
created: 2026-01-22
updated: 2026-01-22
changelog:
  - 1.0.0: 初始版本
---

# PRD: 全链路流程验证

## 背景

Phase 6 实现了 Skill 编排闭环，需要用一个小任务验证完整流程：
PRD → DoD → /qa → /audit → 测试 → PR Gate → Snapshot → Metrics

## 功能描述

在 DevGate Metrics 输出中增加 `generated_at` 字段，记录指标生成时间。

### 改动点

1. `scripts/devgate/metrics.cjs` - JSON 输出增加 `generated_at` 字段
2. `tests/hooks/metrics.test.ts` - 增加一个测试验证字段存在

## 成功标准

1. `metrics.sh --format json` 输出包含 `generated_at` 字段
2. 测试验证 `generated_at` 是 ISO 时间格式
3. npm run qa 通过

## 交付物

### 修改文件
- `scripts/devgate/metrics.cjs`
- `tests/hooks/metrics.test.ts`

## 不做

- 修改其他指标字段
- 修改 human 输出格式
