---
id: dod-zero-escape-org-migration
version: 1.0.0
created: 2026-01-24
updated: 2026-01-24
changelog:
  - 1.0.0: 初始版本
---

# DoD - Zero-Escape A+ 组织仓库迁移

QA: docs/trust/QA-DECISION.md

## Phase 0 验收

- [ ] Gap Report 创建
  Test: manual:api-query
  Evidence: `docs/trust/GAP-REPORT.md`

- [ ] API 证据收集（当前个人仓库状态）
  Test: manual:api-query
  Evidence: `docs/trust/GAP-REPORT.md` (API 输出)

- [ ] 个人仓库限制分析（为什么无法 100%）
  Test: manual:investigation
  Evidence: `docs/trust/GAP-REPORT.md` (restrictions: null)

## Phase 1 验收

- [ ] GitHub Organization 创建
  Test: manual:gh-api
  Evidence: `docs/trust/ORG-SETUP.md`

- [ ] 组织允许 private repo
  Test: manual:gh-api
  Evidence: org settings API 输出

- [ ] 组织权限策略配置
  Test: manual:gh-api
  Evidence: `docs/trust/ORG-SETUP.md` (member privileges)

## Phase 2 验收

- [ ] 仓库迁移完成
  Test: manual:gh-api
  Evidence: `docs/trust/REPO-TRANSFER.md`

- [ ] 仓库仍为 PRIVATE
  Test: manual:gh-api
  Evidence: `gh api repos/ZENITHJOYAI/zenithjoy-engine | jq .private`

- [ ] 历史完整（issues/PR/commits）
  Test: manual:gh-api
  Evidence: commit count 对比、PR/issue count 对比

- [ ] 远程 URL 更新命令
  Test: manual:bash
  Evidence: `docs/trust/REPO-TRANSFER.md` (git remote set-url)

## Phase 3 验收

- [ ] Rulesets 配置完成（或 Branch Protection）
  Test: manual:gh-api
  Evidence: `features/trust-layer/ZERO-ESCAPE-A+.md`

- [ ] Push Restrictions 启用（只有 Merge Bot）
  Test: manual:gh-api
  Evidence: `gh api repos/ZENITHJOYAI/zenithjoy-engine/branches/main/protection | jq .restrictions`

- [ ] Merge Bot 配置完成（GitHub App 或机器人账号）
  Test: manual:gh-app-config
  Evidence: `features/trust-layer/ZERO-ESCAPE-A+.md` (Bot credentials)

- [ ] Trust Proof Suite v2 创建
  Test: tests/trust/trust-proof-suite-v2.test.ts
  Evidence: `scripts/trust-proof-suite-v2.sh`

- [ ] CI job 添加（release 前验证）
  Test: manual:ci-yml
  Evidence: `.github/workflows/ci.yml` (trust-proof job)

## 最终验收

- [ ] trust-proof-suite-v2.sh 全部通过（>=15 项）
  Test: manual:bash
  Evidence: 脚本输出（Passed: >= 15/15）

- [ ] 任何人无法直推 main/develop
  Test: manual:git-push
  Evidence: git push 被拒绝

- [ ] 任何人无法绕过 CI 合并
  Test: manual:gh-api
  Evidence: API merge 返回 403

- [ ] 只有 Merge Bot 能合并
  Test: manual:gh-api
  Evidence: Bot merge 成功，人类 merge 失败

- [ ] 保护等级达到 A+ (100%)
  Test: manual:verification
  Evidence: `features/trust-layer/ZERO-ESCAPE-A+.md` (Final Status: A+)

## 必须通过

- [ ] 仓库历史完整无损
  Test: manual:comparison
  Evidence: 迁移前后 commit/PR/issue 数量对比

- [ ] 仓库保持 PRIVATE
  Test: manual:gh-api
  Evidence: `gh api repos/ZENITHJOYAI/zenithjoy-engine | jq .private` = true

- [ ] Zero-Escape 系统自证
  Test: manual:trust-proof-suite-v2
  Evidence: 所有测试通过
