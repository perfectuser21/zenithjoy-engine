---
id: dod-phase5-learnings
version: 1.0.0
created: 2026-01-22
updated: 2026-01-22
changelog:
  - 1.0.0: 初始版本
---

# DoD - Phase 5: LEARNINGS 自动写回

## 验收标准

### 1. append-learnings.cjs 核心逻辑
- [x] 读取 devgate-metrics.json
  Test: tests/hooks/append-learnings.test.ts
- [x] 生成结构化 markdown 报告
  Test: tests/hooks/append-learnings.test.ts
- [x] 追加到 docs/LEARNINGS.md
  Test: tests/hooks/append-learnings.test.ts
- [x] 幂等：同月不重复追加
  Test: tests/hooks/append-learnings.test.ts

### 2. RCI 名称解析
- [x] 从 regression-contract.yaml 读取 RCI id → name 映射
  Test: tests/hooks/append-learnings.test.ts
- [x] 新增 RCI IDs 显示名称
  Test: tests/hooks/append-learnings.test.ts

### 3. nightly.yml 集成
- [x] 添加 "Append to LEARNINGS" 步骤
  Test: contract:C7-003
- [x] 有变更时自动 commit + push
  Test: manual:nightly-check

### 4. 回归契约更新
- [x] 新增 C7-003（LEARNINGS 自动写回）
  Test: manual:rci-review

### 5. 质量验收
- [x] npm run qa 通过
  Test: contract:C2-001
