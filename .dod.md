---
id: dod-p0-security-bugs
version: 1.0.0
created: 2026-01-22
updated: 2026-01-22
changelog:
  - 1.0.0: 初始版本
---

# DoD - P0 安全漏洞修复

## 验收标准

### branch-protect.sh 修复
- [x] P0-1: jq 缺失时 exit 2（阻止）而非 exit 0（放行）
- [x] P0-2: 添加 realpath 检查防止 symlink 绕过
- [x] P0-3: 增强分支正则，要求完整格式 `cp-xxx` 或 `feature/xxx`

### pr-gate-v2.sh 修复
- [x] P0-1: 本地仓库找不到时 exit 2（阻止）而非 exit 0
- [x] P0-2: 增强分支正则，与 branch-protect.sh 一致

### run-regression.sh 修复
- [x] P0-1: 移除 eval 命令执行，改用安全的直接执行
- [x] P0-2: 移除 eval ls，改用 bash 通配符或 find

### 质量验收
- [x] npm run qa 通过
- [x] bash -n 所有 .sh 文件通过
- [ ] 手动测试绕过场景确认已修复
