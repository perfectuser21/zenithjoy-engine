# Definition of Done - P1 阶段 CI 轮询循环

QA: docs/QA-DECISION.md

## 验收标准

### 功能完成

- [x] Step 8 (PR 创建) 修改完成
  Test: manual:code-review
  - PR 创建后不退出会话
  - 直接调用 Step 9 进入轮询

- [x] Step 9 (CI 轮询) 重写完成
  Test: manual:code-review
  - while 循环轮询 CI 状态
  - 状态1 (PENDING): 每 30 秒检查一次
  - 状态2 (FAILURE): 显示日志 → 修复 → 推送 → 继续轮询
  - 状态3 (SUCCESS): 自动合并 → 退出

- [x] 超时保护机制
  Test: manual:code-review
  - 最长等待 1 小时
  - 超时后报告并退出

- [x] 错误处理
  Test: manual:code-review
  - gh CLI 失败处理
  - 网络错误重试
  - 无法修复时人工介入提示

### 质量检查

- [x] npm run typecheck 通过
  Test: manual:typecheck-output

- [x] npm run test 通过
  Test: manual:test-output

- [x] 文档更新
  Test: manual:doc-review
  - skills/dev/SKILL.md 流程图更新
  - 09-ci.md 内容重写

### 文档

- [x] .prd.md 存在且完整
  Test: manual:file-exists

- [x] .dod.md 存在且完整（本文件）
  Test: manual:file-exists

### 上线

- [x] PR 创建
  Test: manual:pr-link
  Note: 即将创建

- [x] CI 通过
  Test: manual:ci-screenshot
  Note: 将由 GitHub Actions 验证

- [x] PR 合并
  Test: manual:pr-merged
  Note: CI 通过后自动合并
