# gate:learning - Learning 记录审核标准

## 触发时机

Step 10 (Learning 记录) 完成后

## 审核目标

确保 Learning 记录有实质内容，不是"完成了 XX 功能"废话式总结。

## 审核标准

### 1. 经验记录有效性

| 检查项 | 要求 |
|--------|------|
| 有具体问题 | 记录遇到的具体问题，不是"遇到了一些问题" |
| 有解决方法 | 记录具体的解决方法，不是"解决了" |
| 有反思 | 记录为什么会遇到这个问题，下次如何避免 |

**反例**：
```markdown
❌ ## 问题
遇到了一些问题

## 解决
解决了
```

**正例**：
```markdown
✅ ## 问题
Hook 检测到 PRD 文件未更新，阻止修改代码文件

## 原因
.gitignore 忽略了 .prd-*.md 和 .dod-*.md 文件，导致未 git add

## 解决
使用 git add -f 强制添加 PRD/DoD 文件

## 反思
下次在 /dev 流程 Step 3 (Branch) 时，自动检查 PRD/DoD 是否已加入 git，避免后续被 Hook 阻止
```

### 2. 技术决策记录

如果涉及技术决策（如模式 A vs B），应记录：
- 决策背景
- 对比分析（可以引用分析报告）
- 最终决策和理由
- 实施结果

### 3. 坑点记录

记录踩过的坑，帮助后续开发避免：
- 具体的坑（配置错误、API 误用、环境问题等）
- 表现症状
- 根本原因
- 解决方法

### 4. 最佳实践

如果发现了更好的做法，记录：
- 原来的做法
- 新的做法
- 为什么更好
- 何时应该使用

## Subagent Prompt 模板

**重要**: 只审核，不修改文件。返回 PASS 或 FAIL + 详细反馈。

```
你是独立的 Learning 记录审核员。审核以下文件：
- Learning 记录: docs/LEARNINGS.md（或 .learning-*.md）
- PRD: {prd_file}（了解任务背景）

## 审核标准

### 1. 经验记录有效性
- [ ] 是否记录了具体问题？
- [ ] 是否有具体的解决方法？
- [ ] 是否有反思和改进建议？

### 2. 技术决策记录
- 如果涉及技术决策，是否记录了：
  - [ ] 决策背景
  - [ ] 对比分析
  - [ ] 最终决策和理由

### 3. 坑点记录
- [ ] 是否记录了踩过的坑？
- [ ] 是否说明了表现症状和根本原因？
- [ ] 是否提供了解决方法？

### 4. 最佳实践
- [ ] 是否记录了更好的做法？
- [ ] 是否解释了为什么更好？

## 输出格式

## Gate Result

Decision: PASS | FAIL

### Findings
- [PASS/FAIL] 经验记录有效性：是否有实质内容
- [PASS/FAIL] 技术决策记录：是否完整（如果适用）
- [PASS/FAIL] 坑点记录：是否详细
- [PASS/FAIL] 最佳实践：是否有价值

### Required Fixes (if FAIL)
1. 空洞的经验记录：...
2. 缺失的技术决策记录：...
3. 不清晰的坑点记录：...

### Evidence
- Learning 记录条数：...
- 问题/解决/反思完整度：...

**记住**: 不要调用 Edit/Write 工具修改文件，只返回审核结果。
```

## PASS 条件

1. 至少有 1 条有效的经验记录（问题 + 解决 + 反思）
2. 如果涉及技术决策，记录完整
3. 如果踩了坑，记录详细

## FAIL 条件

1. 完全没有实质内容（只有"完成了 XX 功能"）
2. 技术决策记录缺失或不完整
3. 坑点记录太笼统（只说"遇到问题"没有细节）
