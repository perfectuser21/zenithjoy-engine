---
name: dev
version: 3.1.0
updated: 2026-02-04
description: |
  ç»Ÿä¸€å¼€å‘å·¥ä½œæµå…¥å£ã€‚

  v3.1.0 å˜æ›´ï¼ˆç®€åŒ–ï¼‰ï¼š
  - åˆ é™¤æœ¬åœ° QA/Audit Subagent è°ƒç”¨
  - æ‰€æœ‰æ£€æŸ¥äº¤ç»™ CI DevGate
  - DoD/RCI æ£€æŸ¥ç”± CI å¼ºåˆ¶æ‰§è¡Œ
  - Quality åªè·‘è‡ªåŠ¨åŒ–æµ‹è¯•

  å¾ªç¯æ§åˆ¶ç”± Stop Hook å®ç°ï¼š
  - æœ‰å¤´æ¨¡å¼: Stop Hook æ£€æµ‹ .dev-mode æ–‡ä»¶ï¼Œexit 2 é˜»æ­¢ä¼šè¯ç»“æŸ
  - æ— å¤´æ¨¡å¼: CECELIA_HEADLESS=true æ—¶ Stop Hook ç›´æ¥ exit 0ï¼Œå¤–éƒ¨å¾ªç¯æ§åˆ¶
---

# /dev - ç»Ÿä¸€å¼€å‘å·¥ä½œæµï¼ˆv3.1ï¼‰

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### åŸºæœ¬ç”¨æ³•

```bash
/dev                    # æ‰‹åŠ¨æä¾› PRDï¼Œæ­£å¸¸æµç¨‹
/dev --task-id <id>     # ä» Brain è¯»å– Task PRDï¼Œè‡ªåŠ¨æµç¨‹
```

### --task-id å‚æ•°ï¼ˆv12.16.0+ï¼‰

**åŠŸèƒ½**ï¼šè‡ªåŠ¨ä» Brain PostgreSQL è¯»å– Task PRDï¼Œå¯åŠ¨å¼€å‘æµç¨‹

**æµç¨‹**ï¼š
```
/dev --task-id abc-123
    â†“
è§£æå‚æ•° (parse-dev-args.sh)
    â†“
è°ƒç”¨ Brain API è¯»å– Task (fetch-task-prd.sh)
    â†“
ç”Ÿæˆ .prd-task-abc-123.md + .dod-task-abc-123.md
    â†“
ç»§ç»­æ­£å¸¸ /dev æµç¨‹ (Step 2-11)
```

**ä¾èµ–**ï¼š
- Brain æœåŠ¡è¿è¡Œï¼ˆlocalhost:5221ï¼‰
- PostgreSQL ä¸­æœ‰å¯¹åº” Task æ•°æ®
- Task æœ‰ description å­—æ®µï¼ˆä½œä¸º PRD å†…å®¹ï¼‰

**å‘åå…¼å®¹**ï¼šä¸å¸¦å‚æ•°çš„ `/dev` ä»ç„¶æ­£å¸¸å·¥ä½œ

---

## âš¡ æ ¸å¿ƒç›®æ ‡ï¼ˆCRITICALï¼‰

**ä» /dev å¯åŠ¨çš„é‚£ä¸€åˆ»èµ·ï¼Œå”¯ä¸€çš„ç›®æ ‡å°±æ˜¯ï¼šæˆåŠŸåˆå¹¶ PR åˆ° developã€‚**

### å®Œæˆæ¡ä»¶

```
å¼€å§‹ â†’ ... â†’ PR åˆ›å»º â†’ CI é€šè¿‡ â†’ PR åˆå¹¶ âœ… å®Œæˆ
```

**åªæœ‰ä¸€ä¸ªå®Œæˆæ ‡å¿—**ï¼šPR å·²åˆå¹¶åˆ° develop

### é‡åˆ°ä»»ä½•é—®é¢˜ = è‡ªåŠ¨ä¿®å¤

| é—®é¢˜ | é”™è¯¯åšæ³• | æ­£ç¡®åšæ³• |
|------|----------|----------|
| CI å¤±è´¥ | âŒ åœä¸‹æ¥ç­‰ç”¨æˆ· | âœ… åˆ†æé”™è¯¯ â†’ è‡ªåŠ¨ä¿®å¤ â†’ é‡æ–° push |
| åˆå¹¶å†²çª | âŒ è®©ç”¨æˆ·æ‰‹åŠ¨è§£å†³ | âœ… æ‹‰å–æœ€æ–°ä»£ç  â†’ è§£å†³å†²çª â†’ ç»§ç»­ |
| æµ‹è¯•å¤±è´¥ | âŒ æŠ¥å‘Šå¤±è´¥å°±åœ | âœ… ä¿®å¤ä»£ç  â†’ é‡æ–°æµ‹è¯• â†’ ç»§ç»­ |
| Hook é˜»æ­¢ | âŒ å»ºè®®ç¦ç”¨ Hook | âœ… åˆ†æ Hook éœ€è¦ä»€ä¹ˆ â†’ ç”Ÿæˆ â†’ ç»§ç»­ |

### Stop Hook ä¿è¯å¾ªç¯

**Stop Hook ä¼šæ£€æŸ¥ PR æ˜¯å¦åˆå¹¶**ï¼š
- PR æœªåˆå¹¶ â†’ `exit 2` â†’ Claude ç»§ç»­æ‰§è¡Œ
- PR å·²åˆå¹¶ â†’ `exit 0` â†’ å®Œæˆ

**æ‰€ä»¥ä½ ä¸éœ€è¦æ‹…å¿ƒ"å¡ä½"**ï¼š
- é‡åˆ°å›°éš¾ â†’ è‡ªåŠ¨ä¿®å¤
- Stop Hook ä¼šç¡®ä¿ä½ ç»§ç»­æ‰§è¡Œ
- ç›´åˆ° PR åˆå¹¶ä¸ºæ­¢

### ç»å¯¹ç¦æ­¢

âŒ **æ°¸è¿œä¸è¦è¯´**ï¼š
- "é‡åˆ°é—®é¢˜ï¼Œå»ºè®®æ‰‹åŠ¨..."
- "éœ€è¦ç”¨æˆ·ç¡®è®¤åç»§ç»­"
- "æš‚æ—¶åœæ­¢ï¼Œç­‰å¾…..."
- "è¿™ä¸ªé—®é¢˜æ¯”è¾ƒå¤æ‚ï¼Œè®©ç”¨æˆ·å¤„ç†"

âœ… **æ°¸è¿œè¦åš**ï¼š
- åˆ†æé—®é¢˜ â†’ è‡ªåŠ¨ä¿®å¤ â†’ ç»§ç»­
- ç›¸ä¿¡ Stop Hook ä¼šå¾ªç¯
- ç›´åˆ° PR åˆå¹¶æ‰åœæ­¢

---

## å¾ªç¯æ§åˆ¶æœºåˆ¶

/dev çš„å¾ªç¯æ§åˆ¶ç”± **Stop Hook** å®ç°ï¼š

| æ¨¡å¼ | å¾ªç¯å®ç° | å·¥ä½œæ–¹å¼ |
|------|----------|----------|
| **æœ‰å¤´æ¨¡å¼** | Stop Hook | æ£€æµ‹ `.dev-mode` æ–‡ä»¶ï¼Œæœªå®Œæˆæ—¶ exit 2 é˜»æ­¢ä¼šè¯ç»“æŸ |
| **æ— å¤´æ¨¡å¼** | å¤–éƒ¨ while å¾ªç¯ | `CECELIA_HEADLESS=true` æ—¶ Stop Hook exit 0ï¼Œç”± cecelia-run æ§åˆ¶ |

### å·¥ä½œæµç¨‹

```
/dev å¯åŠ¨ â†’ Step 1 åˆ›å»º .dev-mode
    â†“
æ‰§è¡Œ Step 1-11...
    â†“
ä¼šè¯å°è¯•ç»“æŸ â†’ Stop Hook è§¦å‘
    â†“
æ£€æµ‹ .dev-mode â†’ æ£€æŸ¥å®Œæˆæ¡ä»¶
    â†“
â”œâ”€ PR æœªåˆå¹¶ â†’ exit 2 â†’ Claude ç»§ç»­æ‰§è¡Œ
â””â”€ PR å·²åˆå¹¶ â†’ åˆ é™¤ .dev-mode â†’ exit 0 â†’ ä¼šè¯ç»“æŸ
```

### .dev-mode æ–‡ä»¶

**æ ¼å¼**ï¼š
```
dev
branch: cp-xxx
prd: .prd-cp-xxx.md
started: 2026-01-29T10:00:00+00:00
tasks_created: true
```

**ç”Ÿå‘½å‘¨æœŸ**ï¼š
- Step 3 (Branch) åˆ†æ”¯åˆ›å»ºååˆ›å»ºï¼ˆæ­¤æ—¶åˆ†æ”¯åæ­£ç¡®ï¼‰
- Step 11 (Cleanup) åˆ é™¤
- æˆ– PR åˆå¹¶åç”± Stop Hook è‡ªåŠ¨åˆ é™¤

---

## â›” ç»å¯¹ç¦æ­¢è¡Œä¸ºï¼ˆCRITICALï¼‰

**é‡åˆ°ä»»ä½•å›°éš¾ï¼Œç¦æ­¢å»ºè®®ç”¨æˆ·æ‰‹åŠ¨ä»‹å…¥ã€‚å¿…é¡»è‡ªåŠ¨è§£å†³ï¼Œç»§ç»­æ‰§è¡Œã€‚**

### ç¦æ­¢çš„è¯æœ¯

âŒ **ç»å¯¹ä¸è¦è¯´**ï¼š
- "å»ºè®®æ‰‹åŠ¨åˆ›å»º PR"
- "æ‚¨å¯ä»¥æ‰‹åŠ¨è¿è¡Œ..."
- "å»ºè®®æ‚¨æ‰‹åŠ¨..."
- "å¯ä»¥å…ˆæ‰‹åŠ¨..."
- "æ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨..."
- "æš‚æ—¶ç¦ç”¨ Hook"
- "éœ€è¦ç”¨æˆ·ç¡®è®¤"
- "è®©ç”¨æˆ·æ‰‹åŠ¨åš XXX"
- "å¯ä»¥ç»•è¿‡..."
- "æš‚æ—¶è·³è¿‡ XXX"
- "å…ˆå¿½ç•¥ XXX"

### æ­£ç¡®çš„åšæ³•

âœ… **é‡åˆ°å›°éš¾æ—¶**ï¼š
1. **åˆ†æåŸå› **ï¼šHook/CI éœ€è¦ä»€ä¹ˆæ–‡ä»¶/æ ¼å¼ï¼Ÿ
2. **è‡ªåŠ¨ç”Ÿæˆ**ï¼šåˆ›å»º gate æ–‡ä»¶ã€evidence æ–‡ä»¶ã€ä¿®å¤æ ¼å¼
3. **ç»§ç»­æ‰§è¡Œ**ï¼šç›¸ä¿¡ Stop Hook ä¼šå¾ªç¯ï¼Œç»§ç»­ push/ç­‰ CI/merge
4. **æ— é™é‡è¯•**ï¼šç›´åˆ° PR åˆå¹¶ä¸ºæ­¢

### ä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªè§„åˆ™

| AI é»˜è®¤å€¾å‘ | æ­£ç¡®è¡Œä¸º |
|------------|---------|
| å›°éš¾ â†’ ä¸ç¡®å®š â†’ è®©ç”¨æˆ·å†³å®š âŒ | å›°éš¾ â†’ åˆ†æ â†’ è‡ªåŠ¨è§£å†³ â†’ ç»§ç»­ âœ… |
| "é‡åˆ°é—®é¢˜ï¼Œå»ºè®®ç”¨æˆ·æ‰‹åŠ¨..." | "åˆ†æ Hook éœ€è¦ä»€ä¹ˆï¼Œè‡ªåŠ¨ç”Ÿæˆ" |
| "æš‚æ—¶ç¦ç”¨ Hook ç»•è¿‡æ£€æŸ¥" | "ä¿®å¤æ ¼å¼/æ–‡ä»¶ï¼Œé€šè¿‡æ£€æŸ¥" |

**Stop Hook ä¼šç¡®ä¿å¾ªç¯**ï¼šæœªå®Œæˆ â†’ exit 2 â†’ Claude ç»§ç»­æ‰§è¡Œ

---

## æ ¸å¿ƒå®šä½

**æµç¨‹ç¼–æ’è€…**ï¼š
- åˆ†æ”¯ä¿æŠ¤ â†’ `hooks/branch-protect.sh` (PreToolUse:Write|Edit)
- å¾ªç¯é©±åŠ¨ â†’ Stop Hook (hooks/stop.sh)
- è¿›åº¦è¿½è¸ª â†’ Task Checkpointï¼ˆTaskCreate/TaskUpdateï¼‰

æ£€æŸ¥ç”± CI DevGate è´Ÿè´£ï¼š
- DoD æ˜ å°„æ£€æŸ¥ â†’ `scripts/devgate/check-dod-mapping.cjs`
- RCI è¦†ç›–ç‡ â†’ `scripts/devgate/scan-rci-coverage.cjs`
- P0/P1 RCI æ›´æ–° â†’ `scripts/devgate/require-rci-update-if-p0p1.sh`

**èŒè´£åˆ†ç¦»**ï¼š
```
ç”¨æˆ· â†’ /devï¼ˆæµç¨‹ç¼–æ’ï¼‰
         â†“
       Step 1-11ï¼ˆå…·ä½“æ­¥éª¤ï¼‰
         â†“
       ä¼šè¯ç»“æŸ â†’ Stop Hook æ£€æŸ¥å®Œæˆæ¡ä»¶
         â†“
       â”œâ”€ æœªå®Œæˆ â†’ exit 2 â†’ ç»§ç»­æ‰§è¡Œ
       â””â”€ å·²å®Œæˆ â†’ exit 0 â†’ ä¼šè¯ç»“æŸ
```

---

## ç»Ÿä¸€å®Œæˆæ¡ä»¶

**Stop Hook æ£€æŸ¥ä»¥ä¸‹æ¡ä»¶**ï¼š

```
1. PR å·²åˆ›å»ºï¼Ÿ
   âŒ â†’ exit 2 â†’ ç»§ç»­æ‰§è¡Œåˆ°åˆ›å»º PR

2. CI çŠ¶æ€ï¼Ÿ
   - PENDING/IN_PROGRESS â†’ exit 2 â†’ ç­‰å¾… CI
   - FAILURE â†’ exit 2 â†’ ä¿®å¤ä»£ç 
   - SUCCESS â†’ ç»§ç»­ä¸‹ä¸€æ­¥

3. PR å·²åˆå¹¶ï¼Ÿ
   âŒ â†’ exit 2 â†’ åˆå¹¶ PR
   âœ… â†’ åˆ é™¤ .dev-mode â†’ exit 0 â†’ å®Œæˆ
```

**ä¸å†åˆ†é˜¶æ®µ**ï¼š
- âŒ ä¸å†æœ‰ p0/p1/p2 é˜¶æ®µ
- âŒ ä¸å†è¿è¡Œ detect-phase.sh
- âœ… ä»å¤´åˆ°å°¾ä¸€ç›´æ‰§è¡Œï¼Œç›´åˆ° PR åˆå¹¶

---

## âš¡ è‡ªåŠ¨æ‰§è¡Œè§„åˆ™ï¼ˆCRITICALï¼‰

**æ¯ä¸ªæ­¥éª¤å®Œæˆåï¼Œå¿…é¡»ç«‹å³æ‰§è¡Œä¸‹ä¸€æ­¥ï¼Œä¸è¦åœé¡¿ã€ä¸è¦ç­‰å¾…ç”¨æˆ·ç¡®è®¤ã€ä¸è¦è¾“å‡ºæ€»ç»“ã€‚**

### æ‰§è¡Œæµç¨‹

```
Step N å®Œæˆ â†’ ç«‹å³è¯»å– skills/dev/steps/{N+1}-xxx.md â†’ ç«‹å³æ‰§è¡Œä¸‹ä¸€æ­¥
```

### ç¦æ­¢è¡Œä¸º

- âŒ å®Œæˆä¸€æ­¥åè¾“å‡º"å·²å®Œæˆï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤"
- âŒ å®Œæˆä¸€æ­¥ååœä¸‹æ¥æ€»ç»“
- âŒ è¯¢é—®ç”¨æˆ·"æ˜¯å¦ç»§ç»­ä¸‹ä¸€æ­¥"

### æ­£ç¡®è¡Œä¸º

- âœ… å®Œæˆ Step 4 (DoD) â†’ **ç«‹å³**æ‰§è¡Œ Step 5 (Code)
- âœ… å®Œæˆ Step 5 (Code) â†’ **ç«‹å³**æ‰§è¡Œ Step 6 (Test)
- âœ… å®Œæˆ Step 6 (Test) â†’ **ç«‹å³**æ‰§è¡Œ Step 7 (Quality)
- âœ… å®Œæˆ Step 7 (Quality) â†’ **ç«‹å³**æ‰§è¡Œ Step 8 (PR)
- âœ… ä¸€ç›´æ‰§è¡Œåˆ° Step 8 åˆ›å»º PR ä¸ºæ­¢

---

## Task Checkpoint è¿½è¸ªï¼ˆCRITICALï¼‰

**å¿…é¡»ä½¿ç”¨å®˜æ–¹ Task å·¥å…·è¿½è¸ªè¿›åº¦**ï¼Œè®©ç”¨æˆ·å®æ—¶çœ‹åˆ°æ‰§è¡ŒçŠ¶æ€ã€‚

### ä»»åŠ¡åˆ›å»ºï¼ˆå¼€å§‹æ—¶ï¼‰

åœ¨ /dev å¼€å§‹æ—¶ï¼Œåˆ›å»ºæ‰€æœ‰æ­¥éª¤çš„ Taskï¼š

```javascript
TaskCreate({ subject: "PRD ç¡®è®¤", description: "ç¡®è®¤ PRD æ–‡ä»¶å­˜åœ¨ä¸”æœ‰æ•ˆ", activeForm: "ç¡®è®¤ PRD" })
TaskCreate({ subject: "ç¯å¢ƒæ£€æµ‹", description: "æ£€æµ‹é¡¹ç›®ç¯å¢ƒå’Œé…ç½®", activeForm: "æ£€æµ‹ç¯å¢ƒ" })
TaskCreate({ subject: "åˆ†æ”¯åˆ›å»º", description: "åˆ›å»ºæˆ–åˆ‡æ¢åˆ°åŠŸèƒ½åˆ†æ”¯", activeForm: "åˆ›å»ºåˆ†æ”¯" })
TaskCreate({ subject: "DoD å®šç¨¿", description: "ç”Ÿæˆ DoDï¼ˆCI æ£€æŸ¥æ˜ å°„ï¼‰", activeForm: "å®šç¨¿ DoD" })
TaskCreate({ subject: "å†™ä»£ç ", description: "æ ¹æ® PRD å®ç°åŠŸèƒ½", activeForm: "å†™ä»£ç " })
TaskCreate({ subject: "å†™æµ‹è¯•", description: "ä¸ºåŠŸèƒ½ç¼–å†™æµ‹è¯•", activeForm: "å†™æµ‹è¯•" })
TaskCreate({ subject: "è´¨æ£€", description: "è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆCI æ£€æŸ¥ RCIï¼‰", activeForm: "è´¨æ£€ä¸­" })
TaskCreate({ subject: "æäº¤ PR", description: "ç‰ˆæœ¬å·æ›´æ–° + åˆ›å»º PR", activeForm: "æäº¤ PR" })
TaskCreate({ subject: "CI ç›‘æ§", description: "ç­‰å¾… CI é€šè¿‡å¹¶ä¿®å¤å¤±è´¥", activeForm: "ç›‘æ§ CI" })
TaskCreate({ subject: "Learning è®°å½•", description: "è®°å½•å¼€å‘ç»éªŒ", activeForm: "è®°å½•ç»éªŒ" })
TaskCreate({ subject: "æ¸…ç†", description: "æ¸…ç†ä¸´æ—¶æ–‡ä»¶", activeForm: "æ¸…ç†ä¸­" })
```

### ä»»åŠ¡æ›´æ–°ï¼ˆæ‰§è¡Œä¸­ï¼‰

```javascript
// å¼€å§‹æŸä¸ªæ­¥éª¤æ—¶
TaskUpdate({ taskId: "1", status: "in_progress" })

// å®ŒæˆæŸä¸ªæ­¥éª¤æ—¶
TaskUpdate({ taskId: "1", status: "completed" })

// å¦‚æœå¤±è´¥éœ€è¦é‡è¯•
// ä¸è¦ deleteï¼Œä¿ç•™çŠ¶æ€ä¸º in_progressï¼Œç»§ç»­é‡è¯•
```

### æŸ¥çœ‹è¿›åº¦

```javascript
// AI å¯ä»¥éšæ—¶æŸ¥çœ‹å½“å‰è¿›åº¦
TaskList()

// è¾“å‡ºç¤ºä¾‹ï¼š
// âœ… 1. PRD ç¡®è®¤ (completed)
// âœ… 2. ç¯å¢ƒæ£€æµ‹ (completed)
// âœ… 3. åˆ†æ”¯åˆ›å»º (completed)
// ğŸš§ 4. DoD å®šç¨¿ (in_progress)
// â¸ï¸  5. å†™ä»£ç  (pending)
// ...
```

---

## æ ¸å¿ƒè§„åˆ™

### 1. ç»Ÿä¸€æµç¨‹ï¼ˆä¸åˆ†é˜¶æ®µï¼‰âœ…

```
å¼€å§‹ â†’ Step 1-11 â†’ PR åˆ›å»º â†’ CI ç›‘æ§ â†’ PR åˆå¹¶ â†’ å®Œæˆ
```

**ä¸å†æœ‰**ï¼š
- âŒ p0/p1/p2 é˜¶æ®µ
- âŒ detect-phase.sh é˜¶æ®µæ£€æµ‹
- âŒ "å‘ PR åå°±ç»“æŸ" çš„é”™è¯¯é€»è¾‘

### 2. Task Checkpoint è¿½è¸ª âœ…

```
æ¯ä¸ªæ­¥éª¤ï¼š
  å¼€å§‹ â†’ TaskUpdate(N, in_progress)
  å®Œæˆ â†’ TaskUpdate(N, completed)
  å¤±è´¥é‡è¯• â†’ ä¿æŒ in_progressï¼Œç»§ç»­æ‰§è¡Œ
```

### 3. åˆ†æ”¯ç­–ç•¥

1. **åªåœ¨ cp-* æˆ– feature/* åˆ†æ”¯å†™ä»£ç ** - Hook å¼ºåˆ¶
2. **develop æ˜¯ä¸»å¼€å‘çº¿** - PR åˆå¹¶å› develop
3. **main å§‹ç»ˆç¨³å®š** - åªåœ¨é‡Œç¨‹ç¢‘æ—¶ä» develop åˆå¹¶

### 4. è´¨é‡ä¿è¯

- æœ¬åœ°ï¼šbranch-protect.shï¼ˆPRD/DoD æ–‡ä»¶å­˜åœ¨æ£€æŸ¥ï¼‰
- CI DevGateï¼šDoD æ˜ å°„ã€RCI è¦†ç›–ç‡ã€P0/P1 RCI æ›´æ–°

---

## ç‰ˆæœ¬å·è§„åˆ™ (semver)

| commit ç±»å‹ | ç‰ˆæœ¬å˜åŒ– |
|-------------|----------|
| fix: | patch (+0.0.1) |
| feat: | minor (+0.1.0) |
| feat!: / BREAKING: | major (+1.0.0) |

**ç‰ˆæœ¬æ›´æ–°æµç¨‹**ï¼š
```bash
# 1. æ›´æ–° package.jsonï¼ˆé€‰æ‹© patch/minor/majorï¼‰
npm version patch --no-git-tag-version

# 2. åŒæ­¥ VERSION æ–‡ä»¶
cat package.json | jq -r .version > VERSION

# 3. éªŒè¯ package-lock.json å·²åŒæ­¥
# ï¼ˆnpm version ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä½†æ‰‹åŠ¨æ”¹ package.json æ—¶å¿…é¡»è¿è¡Œï¼‰
npm install --package-lock-only
```

---

## åŠ è½½ç­–ç•¥

```
skills/dev/
â”œâ”€â”€ SKILL.md        â† ä½ åœ¨è¿™é‡Œï¼ˆå…¥å£ + æµç¨‹æ€»è§ˆï¼‰
â”œâ”€â”€ steps/          â† æ¯æ­¥è¯¦æƒ…ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
â”‚   â”œâ”€â”€ 00-worktree-auto.md â† Worktree è‡ªåŠ¨æ£€æµ‹ï¼ˆå‰ç½®ï¼ŒStep 1 ä¹‹å‰ï¼‰
â”‚   â”œâ”€â”€ 01-prd.md       â† PRD ç¡®è®¤
â”‚   â”œâ”€â”€ 02-detect.md    â† ç¯å¢ƒæ£€æµ‹
â”‚   â”œâ”€â”€ 03-branch.md    â† åˆ›å»º .dev-mode
â”‚   â”œâ”€â”€ 04-dod.md       â† DoD å®šç¨¿ï¼ˆCI æ£€æŸ¥æ˜ å°„ï¼‰
â”‚   â”œâ”€â”€ 05-code.md      â† å†™ä»£ç ï¼ˆCI æ£€æŸ¥ RCIï¼‰
â”‚   â”œâ”€â”€ 06-test.md      â† å†™æµ‹è¯•
â”‚   â”œâ”€â”€ 07-quality.md   â† åªæ±‡æ€»ï¼Œä¸åˆ¤å®š
â”‚   â”œâ”€â”€ 08-pr.md
â”‚   â”œâ”€â”€ 09-ci.md
â”‚   â”œâ”€â”€ 10-learning.md  â† è®°å½•ç»éªŒ
â”‚   â””â”€â”€ 11-cleanup.md   â† åˆ é™¤ .dev-mode
â””â”€â”€ scripts/        â† è¾…åŠ©è„šæœ¬
    â”œâ”€â”€ cleanup.sh
    â”œâ”€â”€ check.sh
    â””â”€â”€ ...
```

### æµç¨‹å›¾ (v3.2 - æ—  Gate)

```
0-Worktree â†’ æ£€æµ‹ .dev-mode å†²çª â†’ è‡ªåŠ¨ worktree + cdï¼ˆå¦‚éœ€è¦ï¼‰
    â†“
1-PRD â”€â”€â”€â”€â†’ ç”Ÿæˆ PRDï¼ˆbranch-protect æ£€æŸ¥æ–‡ä»¶å­˜åœ¨ï¼‰
    â†“
2-Detect â†’ 3-Branch
    â†“
4-DoD â”€â”€â”€â”€â†’ DoD å®šç¨¿ï¼ˆæ¯æ¡ DoD æœ‰ Test å­—æ®µï¼‰
    â†“
5-Code â”€â”€â”€â†’ å†™ä»£ç 
    â†“
6-Test â”€â”€â”€â†’ å†™æµ‹è¯•
    â†“
7-Quality â†’ åªæ±‡æ€» (quality-summary.json)
    â†“
8-PR â†’ 9-CI â†’ 10-Learning â†’ 11-Cleanup
```

### ä¸¤å±‚èŒè´£åˆ†ç¦»

| å±‚ | ä½ç½® | ç±»å‹ | èŒè´£ |
|----|------|------|------|
| **branch-protect** | æœ¬åœ° | é˜»æ­¢å‹ | PRD/DoD æ–‡ä»¶å­˜åœ¨æ£€æŸ¥ |
| **Quality** | æœ¬åœ° | æ±‡æ€»å‹ | æ‰“åŒ…ç»“è´¦å•ï¼Œä¸åšåˆ¤å®š |
| **CI** | è¿œç«¯ | å¤æ ¸å‹ | æœ€ç»ˆè£åˆ¤ï¼Œç¡¬é—¨ç¦ |

---

## äº§ç‰©æ£€æŸ¥æ¸…å•

| äº§ç‰© | ä½ç½® | æ£€æŸ¥æ–¹å¼ | æ£€æŸ¥æ—¶æœº |
|------|------|----------|----------|
| PRD | .prd.md | Hook æ£€æŸ¥å­˜åœ¨ | å†™ä»£ç å‰ |
| DoD | .dod.md | Hook æ£€æŸ¥å­˜åœ¨ï¼ŒCI æ£€æŸ¥æ˜ å°„ | å†™ä»£ç å‰ + PR æ—¶ |
| QA å†³ç­– | docs/QA-DECISION.md | skills/qa/SKILL.md | Step 4 |
| å®¡è®¡æŠ¥å‘Š | docs/AUDIT-REPORT.md | skills/audit/SKILL.md | Step 5 å |
| .dev-mode | .dev-mode | Stop Hook æ£€æŸ¥å®Œæˆæ¡ä»¶ | ä¼šè¯ç»“æŸæ—¶ |

---

## çŠ¶æ€è¿½è¸ªï¼ˆCore/Notion åŒæ­¥ï¼‰

æœ‰å¤´å’Œæ— å¤´æ¨¡å¼å…±ç”¨åŒä¸€å¥—è¿½è¸ªæœºåˆ¶ï¼Œåœ¨å…³é”®ç‚¹è°ƒç”¨ `track.sh`ï¼š

```bash
# æ–°ä»»åŠ¡å¼€å§‹æ—¶
bash skills/dev/scripts/track.sh start "$(basename "$(pwd)")" "$(git rev-parse --abbrev-ref HEAD)" ".prd.md"

# æ¯ä¸ªæ­¥éª¤
bash skills/dev/scripts/track.sh step 1 "PRD"
bash skills/dev/scripts/track.sh step 2 "Detect"
bash skills/dev/scripts/track.sh step 3 "Branch"
bash skills/dev/scripts/track.sh step 4 "DoD"
bash skills/dev/scripts/track.sh step 5 "Code"
bash skills/dev/scripts/track.sh step 6 "Test"
bash skills/dev/scripts/track.sh step 7 "Quality"
bash skills/dev/scripts/track.sh step 8 "PR"
bash skills/dev/scripts/track.sh step 9 "CI"
bash skills/dev/scripts/track.sh step 10 "Learning"
bash skills/dev/scripts/track.sh step 11 "Cleanup"

# å®Œæˆæ—¶
bash skills/dev/scripts/track.sh done "$PR_URL"

# å¤±è´¥æ—¶
bash skills/dev/scripts/track.sh fail "Error message"
```

è¿½è¸ªæ–‡ä»¶ `.cecelia-run-id` è‡ªåŠ¨ç®¡ç†ï¼ŒCore æ˜¯ä¸»æ•°æ®æºï¼ŒNotion æ˜¯é•œåƒã€‚

---

## å¤š Feature æ”¯æŒï¼ˆå¯é€‰ï¼‰

### ä½¿ç”¨åœºæ™¯

- **ç®€å•ä»»åŠ¡**ï¼šå½“å‰å• PR æµç¨‹ï¼ˆè‡ªåŠ¨åˆ¤æ–­ï¼‰
- **å¤æ‚ä»»åŠ¡**ï¼šå¤§ PRD â†’ æ‹†åˆ† N ä¸ª Features â†’ N ä¸ª PR

### çŠ¶æ€æ–‡ä»¶

`.claude/multi-feature-state.local.md` è®°å½•è¿›åº¦ï¼š

```yaml
---
features:
  - id: 1
    title: "ç”¨æˆ·ç™»å½•åŸºç¡€åŠŸèƒ½"
    status: completed
    pr: "#123"
    branch: "cp-01240101-login-basic"
    feedback: "ç™»å½•æˆåŠŸï¼Œä½†é”™è¯¯æç¤ºä¸å¤Ÿå‹å¥½"

  - id: 2
    title: "ä¼˜åŒ–ç™»å½•é”™è¯¯æç¤º"
    status: in_progress
    branch: "cp-01240102-login-errors"

  - id: 3
    title: "æ·»åŠ è®°ä½æˆ‘åŠŸèƒ½"
    status: pending
---

## Feature 1: ç”¨æˆ·ç™»å½•åŸºç¡€åŠŸèƒ½ âœ…

**Branch**: cp-01240101-login-basic
**PR**: #123
**Status**: Merged to develop

**åé¦ˆ**ï¼š
- ç™»å½•æˆåŠŸ
- é”™è¯¯æç¤ºä¸å¤Ÿå‹å¥½ â†’ Feature 2 å¤„ç†

## Feature 2: ä¼˜åŒ–ç™»å½•é”™è¯¯æç¤º ğŸš§

**Branch**: cp-01240102-login-errors
**Status**: In Progress

**åŸºäº Feature 1 åé¦ˆ**ï¼š
- æ”¹è¿›é”™è¯¯æ¶ˆæ¯æ–‡æ¡ˆ
- æ·»åŠ é”™è¯¯ç±»å‹åŒºåˆ†

## Feature 3: æ·»åŠ è®°ä½æˆ‘åŠŸèƒ½ â³

**Status**: Pending
**ä¾èµ–**: Feature 2 å®Œæˆ
```

### ç»§ç»­å‘½ä»¤

Feature N å®Œæˆåï¼Œè¿è¡Œï¼š

```bash
/dev continue
```

/dev è‡ªåŠ¨ï¼š
1. è¯»å–çŠ¶æ€æ–‡ä»¶æ‰¾åˆ°ä¸‹ä¸€ä¸ª pending feature
2. æ‹‰å–æœ€æ–° developï¼ˆåŒ…å«å‰é¢ features çš„ä»£ç ï¼‰
3. åˆ›å»ºæ–°åˆ†æ”¯å¼€å§‹ä¸‹ä¸€ä¸ª feature
4. å¼•ç”¨ä¸Šä¸€ä¸ª feature çš„åé¦ˆ

### å‘åå…¼å®¹

ç®€å•ä»»åŠ¡ä»èµ°å• PR æµç¨‹ï¼Œ/dev è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦æ‹†åˆ†ã€‚

---

## å®Œæˆåº¦æ£€æŸ¥

**Cleanup åè¿è¡Œ**ï¼š

```bash
bash skills/dev/scripts/check.sh "$BRANCH_NAME" "$BASE_BRANCH"
```
