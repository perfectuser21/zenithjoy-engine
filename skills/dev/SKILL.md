---
name: dev
version: 2.0.0
updated: 2026-01-24
description: |
  ç»Ÿä¸€å¼€å‘å·¥ä½œæµå…¥å£ï¼ˆä¸¤é˜¶æ®µ + äº‹ä»¶é©±åŠ¨ï¼‰ã€‚

  è§¦å‘æ¡ä»¶ï¼š
  - ç”¨æˆ·è¯´ä»»ä½•å¼€å‘ç›¸å…³çš„éœ€æ±‚
  - ç”¨æˆ·è¯´ /dev
  - Hook è¾“å‡º [SKILL_REQUIRED: dev]

  v2.0.0 å˜æ›´ï¼š
  - ä¸¤é˜¶æ®µåˆ†ç¦»ï¼šp0 (å‘ PR) + p1 (ä¿® CI)
  - Stop Hook å¼ºåˆ¶è´¨æ£€ï¼ˆä¼šè¯ç»“æŸæ—¶å¼ºåˆ¶ï¼‰
  - P1 è½®è¯¢å¾ªç¯ï¼ˆæŒç»­æ£€æŸ¥ CI ç›´åˆ°æˆåŠŸï¼‰
---

# /dev - ç»Ÿä¸€å¼€å‘å·¥ä½œæµï¼ˆv2.0ï¼‰

## æ ¸å¿ƒå®šä½

**æµç¨‹ç¼–æ’è€… + ä¸¤é˜¶æ®µåˆ†ç¦» + P1 è½®è¯¢å¾ªç¯**ï¼š
- é˜¶æ®µæ£€æµ‹ â†’ `scripts/detect-phase.sh`
- è´¨æ£€å¼ºåˆ¶ â†’ `hooks/stop.sh` (Stop Hook)
- æ”¾è¡Œåˆ¤æ–­ â†’ `hooks/pr-gate-v2.sh` (PreToolUse:Bash)
- P1 è½®è¯¢ â†’ `skills/dev/steps/09-ci.md` (æŒç»­æ£€æŸ¥ CI)

åˆ¤æ–­ç”±ä¸“é—¨çš„è§„èŒƒè´Ÿè´£ï¼š
- æµ‹è¯•å†³ç­– â†’ å‚è€ƒ `skills/qa/SKILL.md`
- ä»£ç å®¡è®¡ â†’ å‚è€ƒ `skills/audit/SKILL.md`

---

## âš¡ è‡ªåŠ¨æ‰§è¡Œè§„åˆ™ï¼ˆCRITICALï¼‰

**æ¯ä¸ªæ­¥éª¤å®Œæˆåï¼Œå¿…é¡»ç«‹å³æ‰§è¡Œä¸‹ä¸€æ­¥ï¼Œä¸è¦åœé¡¿ã€ä¸è¦ç­‰å¾…ç”¨æˆ·ç¡®è®¤ã€ä¸è¦è¾“å‡ºæ€»ç»“ã€‚**

### æ‰§è¡Œæµç¨‹

```
Step N å®Œæˆ â†’ ç«‹å³è¯»å– skills/dev/steps/{N+1}-xxx.md â†’ ç«‹å³æ‰§è¡Œä¸‹ä¸€æ­¥
```

### ç¦æ­¢è¡Œä¸º

- âŒ å®Œæˆä¸€æ­¥åè¾“å‡º"å·²å®Œæˆï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤"
- âŒ å®Œæˆä¸€æ­¥ååœä¸‹æ¥æ€»ç»“
- âŒ è¯¢é—®ç”¨æˆ·"æ˜¯å¦ç»§ç»­ä¸‹ä¸€æ­¥"
- âŒ Skill è°ƒç”¨è¿”å›ååœé¡¿ï¼ˆå¦‚ /qaã€/auditï¼‰

### æ­£ç¡®è¡Œä¸º

- âœ… å®Œæˆ Step 4 (DoD + /qa) â†’ **ç«‹å³**æ‰§è¡Œ Step 5 (Code)
- âœ… å®Œæˆ Step 5 (Code) â†’ **ç«‹å³**æ‰§è¡Œ Step 6 (Test)
- âœ… å®Œæˆ Step 6 (Test) â†’ **ç«‹å³**æ‰§è¡Œ Step 7 (Quality)
- âœ… å®Œæˆ Step 7 (Quality + /audit) â†’ **ç«‹å³**æ‰§è¡Œ Step 8 (PR)
- âœ… ä¸€ç›´æ‰§è¡Œåˆ° Step 8 åˆ›å»º PR ä¸ºæ­¢

### å”¯ä¸€åœæ­¢ç‚¹

- p0 é˜¶æ®µï¼šPR åˆ›å»ºæˆåŠŸåï¼ˆStop Hook å…è®¸ç»“æŸï¼‰
- p1 é˜¶æ®µï¼šCI é€šè¿‡ä¸” PR åˆå¹¶å
- p2 é˜¶æ®µï¼šæ£€æµ‹åˆ° CI å·²é€šè¿‡æ—¶

### ç‰¹åˆ«æ³¨æ„ï¼šSkill è°ƒç”¨åå¿…é¡»ç»§ç»­

å½“è°ƒç”¨ `/qa` æˆ– `/audit` Skill åï¼š
1. **ä¸è¦**è¾“å‡º"QA å†³ç­–å·²ç”Ÿæˆï¼ç°åœ¨è¿”å› /dev æµç¨‹ç»§ç»­æ‰§è¡Œ..."
2. **ä¸è¦**åœä¸‹æ¥ç­‰å¾…
3. **ç«‹å³**è¯»å–ä¸‹ä¸€æ­¥çš„ steps æ–‡ä»¶å¹¶æ‰§è¡Œ

---

## å…¥å£ï¼šé˜¶æ®µæ£€æµ‹ï¼ˆä¸¤é˜¶æ®µï¼‰

**è¿›å…¥ /dev åï¼Œé¦–å…ˆè¿è¡Œé˜¶æ®µæ£€æµ‹**ï¼š

```bash
# è¿è¡Œé˜¶æ®µæ£€æµ‹
bash scripts/detect-phase.sh

# è¾“å‡ºæ ¼å¼
# PHASE: p0 / p1 / p2 / pending / unknown
# DESCRIPTION: ...
# ACTION: ...
```

### é˜¶æ®µå®šä¹‰

| é˜¶æ®µ | æ¡ä»¶ | ç›®æ ‡ | ç­–ç•¥ |
|------|------|------|------|
| **p0** | æ—  PR | å‘ PR | è´¨æ£€å¾ªç¯ â†’ åˆ›å»º PR â†’ ç»“æŸï¼ˆä¸ç­‰ CIï¼‰|
| **p1** | PR + CI fail | ä¿®åˆ° CI ç»¿ | è½®è¯¢å¾ªç¯ï¼šæ£€æŸ¥ CI â†’ å¤±è´¥åˆ™ä¿®å¤å¹¶ç»§ç»­ â†’ æˆåŠŸåˆ™åˆå¹¶ |
| **p2** | PR + CI pass | ä¸ä»‹å…¥ | ç›´æ¥é€€å‡ºï¼ˆGitHub è‡ªåŠ¨ mergeï¼‰|
| **pending** | PR + CI pending | - | ç›´æ¥é€€å‡ºï¼ˆç¨åå†æŸ¥ï¼‰|
| **unknown** | gh API é”™è¯¯ | - | ç›´æ¥é€€å‡ºï¼ˆä¸è¯¯åˆ¤ï¼‰|

**è¯¦ç»†æ–‡æ¡£**: `docs/PHASE-DETECTION.md`

---

## æµç¨‹èŠ‚ç‚¹ï¼ˆä¸¤é˜¶æ®µåˆ†ç¦»ï¼‰

### p0 é˜¶æ®µï¼šPublishedï¼ˆå‘ PR ä¹‹å‰ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 p0: Published é˜¶æ®µ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  é˜¶æ®µæ£€æµ‹ (scripts/detect-phase.sh)                     â”‚
â”‚      â†’ PHASE: p0                                        â”‚
â”‚      â†“                                                  â”‚
â”‚  PRD ç¡®å®š (01-prd.md)                                   â”‚
â”‚      â†“                                                  â”‚
â”‚  ç¯å¢ƒæ£€æµ‹ (02-detect.md)                                â”‚
â”‚      â†“                                                  â”‚
â”‚  åˆ†æ”¯åˆ›å»º (03-branch.md)                                â”‚
â”‚      â†“                                                  â”‚
â”‚  DoD å®šç¨¿ (04-dod.md)                                   â”‚
â”‚      â”‚   å« QA Decision Node                            â”‚
â”‚      â”‚   äº§ç‰©: docs/QA-DECISION.md                      â”‚
â”‚      â†“                                                  â”‚
â”‚  å†™ä»£ç  + å†™æµ‹è¯• (05-code.md, 06-test.md)               â”‚
â”‚      â†“                                                  â”‚
â”‚  è´¨æ£€å¾ªç¯ (07-quality.md) â† Stop Hook å¼ºåˆ¶              â”‚
â”‚      â”‚   L2A: Audit (Decision: PASS)                    â”‚
â”‚      â”‚   L1: npm run qa:gate                            â”‚
â”‚      â”‚   å¤±è´¥ â†’ ä¿®å¤ â†’ é‡è¯•ï¼ˆè´¨æ£€å¾ªç¯ï¼‰                 â”‚
â”‚      â†“                                                  â”‚
â”‚  æäº¤ PR (08-pr.md)                                     â”‚
â”‚      â”‚   Stop Hook: PR åˆ›å»ºåç«‹å³ç»“æŸ                   â”‚
â”‚      â”‚   ä¸æ£€æŸ¥ CIï¼ˆp0 ä¸ç­‰å¾… CIï¼‰                      â”‚
â”‚      â†“                                                  â”‚
â”‚  ç»“æŸå¯¹è¯ âœ… ï¼ˆä¸ç­‰ CIï¼‰                                 â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### p1 é˜¶æ®µï¼šCI fail ä¿®å¤ï¼ˆè½®è¯¢å¾ªç¯ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            p1: CI fail ä¿®å¤ï¼ˆè½®è¯¢å¾ªç¯ï¼‰                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  é˜¶æ®µæ£€æµ‹ (scripts/detect-phase.sh)                     â”‚
â”‚      â†’ PHASE: p1                                        â”‚
â”‚      â†“                                                  â”‚
â”‚  CI è½®è¯¢å¾ªç¯ (09-ci.md)                                 â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”‚   while true; do                                 â”‚
â”‚      â”‚     æ£€æŸ¥ CI çŠ¶æ€                                 â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”‚     case:                                        â”‚
â”‚      â”‚       in_progress/queued/pending:                â”‚
â”‚      â”‚         sleep 30s                                â”‚
â”‚      â”‚         continueï¼ˆç»§ç»­å¾ªç¯ï¼‰                     â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”‚       failure:                                   â”‚
â”‚      â”‚         åˆ†æå¤±è´¥åŸå›                               â”‚
â”‚      â”‚         ä¿®å¤ä»£ç                                  â”‚
â”‚      â”‚         git add && commit && push                â”‚
â”‚      â”‚         continueï¼ˆç»§ç»­å¾ªç¯ï¼Œä¸é€€å‡ºï¼ï¼‰            â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”‚       success:                                   â”‚
â”‚      â”‚         gh pr merge --squash --delete-branch     â”‚
â”‚      â”‚         breakï¼ˆé€€å‡ºå¾ªç¯ï¼‰                         â”‚
â”‚      â”‚   done                                           â”‚
â”‚      â†“                                                  â”‚
â”‚  ç»“æŸå¯¹è¯ âœ… ï¼ˆPR å·²åˆå¹¶ï¼‰                               â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### p2 é˜¶æ®µï¼šCI passï¼ˆå·²å®Œæˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    p2: CI pass                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é˜¶æ®µæ£€æµ‹ â†’ PHASE: p2                                   â”‚
â”‚  ç›´æ¥é€€å‡º âœ… ï¼ˆGitHub è‡ªåŠ¨ mergeï¼‰                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### pending é˜¶æ®µï¼šç­‰å¾… CI ç»“æœ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              pending: ç­‰å¾… CI ç»“æœ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  é˜¶æ®µæ£€æµ‹ (scripts/detect-phase.sh)                     â”‚
â”‚      â†’ PHASE: pending                                   â”‚
â”‚      â†“                                                  â”‚
â”‚  ç­‰å¾…å¾ªç¯ï¼ˆæŒ‚ç€ç­‰ï¼‰                                      â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”‚   while true; do                                 â”‚
â”‚      â”‚     æ£€æŸ¥ CI çŠ¶æ€                                 â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”‚     case:                                        â”‚
â”‚      â”‚       pending/queued:                            â”‚
â”‚      â”‚         sleep 30s                                â”‚
â”‚      â”‚         continueï¼ˆç»§ç»­å¾ªç¯ï¼‰                     â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”‚       failure:                                   â”‚
â”‚      â”‚         è½¬å…¥ p1 ä¿®å¤æµç¨‹                          â”‚
â”‚      â”‚         breakï¼ˆé€€å‡ºç­‰å¾…å¾ªç¯ï¼‰                    â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”‚       success:                                   â”‚
â”‚      â”‚         è½¬å…¥ p2 ç»“æŸæµç¨‹                          â”‚
â”‚      â”‚         breakï¼ˆé€€å‡ºç­‰å¾…å¾ªç¯ï¼‰                    â”‚
â”‚      â”‚   done                                           â”‚
â”‚      â†“                                                  â”‚
â”‚  è½¬å…¥ p1 æˆ– p2 é˜¶æ®µ                                      â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### unknownï¼šAPI é”™è¯¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    unknown                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  unknown: gh API é”™è¯¯ â†’ ç›´æ¥é€€å‡ºï¼ˆä¸è¯¯åˆ¤ï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒè§„åˆ™ï¼ˆv2.0ï¼‰

### 1. ä¸¤é˜¶æ®µåˆ†ç¦» âœ…

```
p0: å‘ PR â†’ ç»“æŸï¼ˆä¸ç­‰ CIï¼‰
p1: è½®è¯¢ CI â†’ å¤±è´¥åˆ™ä¿®å¤å¹¶ç»§ç»­ â†’ æˆåŠŸåˆ™åˆå¹¶å¹¶é€€å‡º
p2: ç›´æ¥é€€å‡ºï¼ˆGitHub è‡ªåŠ¨ mergeï¼‰
```

### 2. Stop Hook å¼ºåˆ¶è´¨æ£€ âœ…

```
p0: è´¨æ£€æœªé€šè¿‡ OR PR æœªåˆ›å»º â†’ exit 2ï¼ˆç»§ç»­ï¼‰
p1: CI fail â†’ exit 2ï¼ˆç»§ç»­ä¿®ï¼‰
    CI pending â†’ exit 0ï¼ˆé€€å‡ºï¼Œç­‰å”¤é†’ï¼‰
    CI pass â†’ exit 0ï¼ˆç»“æŸï¼‰
```

### 3. P1 è½®è¯¢å¾ªç¯ âœ…

```
while true; do
  æ£€æŸ¥ CI çŠ¶æ€
  case:
    running â†’ sleep 30, continue
    failure â†’ ä¿®å¤ä»£ç  â†’ push â†’ continueï¼ˆä¸é€€å‡ºï¼ï¼‰
    success â†’ merge â†’ break
done
```

### 4. åˆ†æ”¯ç­–ç•¥

1. **åªåœ¨ cp-* æˆ– feature/* åˆ†æ”¯å†™ä»£ç ** - Hook å¼ºåˆ¶
2. **develop æ˜¯ä¸»å¼€å‘çº¿** - PR åˆå¹¶å› develop
3. **main å§‹ç»ˆç¨³å®š** - åªåœ¨é‡Œç¨‹ç¢‘æ—¶ä» develop åˆå¹¶

### 5. äº§ç‰©é—¨æ§

- QA-DECISION.mdï¼ˆStep 4 ç”Ÿæˆï¼‰
- AUDIT-REPORT.mdï¼ˆStep 7 ç”Ÿæˆï¼ŒDecision: PASSï¼‰
- .quality-gate-passedï¼ˆStep 7 ç”Ÿæˆï¼Œæµ‹è¯•é€šè¿‡ï¼‰

---

## Ralph Loop ä½¿ç”¨ï¼ˆè‡ªåŠ¨å¾ªç¯æœºåˆ¶ï¼‰

**Ralph Loop æ˜¯ Claude Code å®˜æ–¹æ’ä»¶**ï¼Œä¸ Stop Hook è‡ªåŠ¨é…åˆå®ç°å¾ªç¯é‡è¯•ã€‚

### å·¥ä½œåŸç†

```
Ralph Loop (å¤–å±‚å¾ªç¯æ¡†æ¶)
    â†“
AI æ‰§è¡Œä»»åŠ¡
    â†“
AI å°è¯•ç»“æŸä¼šè¯
    â†“
Stop Hook æ£€æŸ¥çŠ¶æ€
    â”œâ”€ exit 2ï¼ˆæœªå®Œæˆï¼‰â†’ Ralph Loop è‡ªåŠ¨é‡æ–°æ³¨å…¥ä»»åŠ¡
    â””â”€ exit 0ï¼ˆå·²å®Œæˆï¼‰â†’ AI è¾“å‡º <promise>SIGNAL</promise> â†’ Ralph Loop ç»“æŸ
```

**å…³é”®ç‚¹**ï¼š
- Ralph Loop æ’ä»¶å·²åœ¨ `~/.claude/settings.json` ä¸­å¯ç”¨
- Stop Hook è¿”å› `exit 2` â†’ Ralph Loop è‡ªåŠ¨é‡è¯•
- AI è¾“å‡º `<promise>SIGNAL</promise>` â†’ Ralph Loop æ£€æµ‹åˆ°åç»“æŸå¾ªç¯
- æ¯æ¬¡è¿­ä»£ AI éƒ½èƒ½çœ‹åˆ°ä¹‹å‰çš„å·¥ä½œå’Œé”™è¯¯ä¿¡æ¯

### P0 é˜¶æ®µä½¿ç”¨ï¼ˆè´¨æ£€å¾ªç¯ï¼‰

**å¯åŠ¨å‘½ä»¤**ï¼š
```bash
/ralph-loop "å®ç° <åŠŸèƒ½æè¿°>ï¼Œå®Œæˆè´¨æ£€åè¾“å‡º <promise>QUALITY_GATE_PASSED</promise>" \
    --max-iterations 20 \
    --completion-promise "QUALITY_GATE_PASSED"
```

**å¾ªç¯æœºåˆ¶**ï¼š
```
Ralph Loop å¯åŠ¨
    â†“
AI æ‰§è¡Œ Step 1-6ï¼ˆPRD â†’ åˆ†æ”¯ â†’ DoD â†’ ä»£ç  â†’ æµ‹è¯•ï¼‰
    â†“
AI æ‰§è¡Œ Step 7ï¼ˆè´¨æ£€ï¼‰
    â”œâ”€ Audit Node â†’ AUDIT-REPORT.md
    â”œâ”€ npm run qa (L1)
    â†“
AI å°è¯•ç»“æŸä¼šè¯
    â†“
Stop Hook æ£€æŸ¥ï¼ˆhooks/stop.sh p0 éƒ¨åˆ†ï¼‰
    â”œâ”€ Decision: FAIL â†’ exit 2 â†’ Ralph ç»§ç»­
    â”œâ”€ .quality-gate-passed ä¸å­˜åœ¨ â†’ exit 2 â†’ Ralph ç»§ç»­
    â””â”€ å…¨éƒ¨é€šè¿‡ â†’ exit 0 â†’ AI è¾“å‡º <promise>QUALITY_GATE_PASSED</promise>
        â†“
    AI ç»§ç»­ Step 8ï¼ˆåˆ›å»º PRï¼‰
        â†“
    Stop Hook: PR å·²åˆ›å»º â†’ exit 0 â†’ ä¼šè¯ç»“æŸ âœ…
```

### P1 é˜¶æ®µä½¿ç”¨ï¼ˆCI ä¿®å¤å¾ªç¯ï¼‰

**å¯åŠ¨å‘½ä»¤**ï¼š
```bash
/ralph-loop "ä¿®å¤ CI å¤±è´¥ï¼ŒCI é€šè¿‡åè¾“å‡º <promise>CI_PASSED</promise>" \
    --max-iterations 10 \
    --completion-promise "CI_PASSED"
```

**å¾ªç¯æœºåˆ¶**ï¼š
```
Ralph Loop å¯åŠ¨
    â†“
AI æ£€æŸ¥ CI çŠ¶æ€ï¼ˆgh pr checksï¼‰
    â†“
Case CI_STATUS:
    â”œâ”€ PENDING/QUEUED â†’ AI ç­‰å¾… â†’ Stop Hook exit 0 â†’ Ralph ç»§ç»­ï¼ˆæœªè¾“å‡º promiseï¼‰
    â”œâ”€ FAILURE â†’ AI ä¿®å¤ â†’ push â†’ Stop Hook exit 2 â†’ Ralph ç»§ç»­
    â””â”€ SUCCESS â†’ AI åˆå¹¶ PR â†’ è¾“å‡º <promise>CI_PASSED</promise>
        â†“
Ralph Loop æ£€æµ‹åˆ° completion-promise â†’ ç»“æŸå¾ªç¯ âœ…
```

### Stop Hook é…åˆ

**P0 é˜¶æ®µ**ï¼ˆ`hooks/stop.sh`ï¼‰ï¼š
```bash
if [ è´¨æ£€æœªé€šè¿‡ ]; then
    exit 2  # Ralph Loop ç»§ç»­
elif [ PR æœªåˆ›å»º ]; then
    exit 2  # Ralph Loop ç»§ç»­
else
    exit 0  # å…è®¸ç»“æŸ
fi
```

**P1 é˜¶æ®µ**ï¼ˆ`hooks/stop.sh`ï¼‰ï¼š
```bash
if [ CI == FAILURE ]; then
    exit 2  # Ralph Loop ç»§ç»­ä¿®å¤
elif [ CI == PENDING ]; then
    exit 0  # å…è®¸ç»“æŸï¼ˆAI æœªè¾“å‡º promiseï¼ŒRalph ä¼šç»§ç»­ï¼‰
elif [ CI == SUCCESS ]; then
    exit 0  # AI è¾“å‡º promiseï¼ŒRalph ç»“æŸ
fi
```

### ä¼˜åŠ¿

1. **è‡ªåŠ¨é‡è¯•**ï¼šStop Hook è¿”å› exit 2 æ—¶æ— éœ€æ‰‹åŠ¨å‚¬ä¿ƒï¼ŒRalph è‡ªåŠ¨ç»§ç»­
2. **ä¸Šä¸‹æ–‡ä¿æŒ**ï¼šæ¯æ¬¡è¿­ä»£éƒ½èƒ½çœ‹åˆ°ä¹‹å‰çš„ä»£ç ã€æŠ¥å‘Šã€é”™è¯¯ä¿¡æ¯
3. **æ˜ç¡®å®Œæˆ**ï¼šé€šè¿‡ `<promise>` æ ‡è®°æ˜ç¡®å‘ŠçŸ¥å®Œæˆï¼Œé¿å…è¿‡æ—©é€€å‡º
4. **é˜²æ­¢æ— é™å¾ªç¯**ï¼š`--max-iterations` å‚æ•°é™åˆ¶æœ€å¤§è¿­ä»£æ¬¡æ•°

### å…¸å‹ä½¿ç”¨åœºæ™¯

| åœºæ™¯ | å‘½ä»¤ | Promise æ ‡è®° |
|------|------|-------------|
| æ–°åŠŸèƒ½å¼€å‘ | `/ralph-loop "å®ç°åŠŸèƒ½X..." --completion-promise "QUALITY_GATE_PASSED"` | `<promise>QUALITY_GATE_PASSED</promise>` |
| CI ä¿®å¤ | `/ralph-loop "ä¿®å¤CI..." --completion-promise "CI_PASSED"` | `<promise>CI_PASSED</promise>` |
| Bug ä¿®å¤ | `/ralph-loop "ä¿®å¤Bug#123..." --completion-promise "DONE"` | `<promise>DONE</promise>` |

---

## ç‰ˆæœ¬å·è§„åˆ™ (semver)

| commit ç±»å‹ | ç‰ˆæœ¬å˜åŒ– |
|-------------|----------|
| fix: | patch (+0.0.1) |
| feat: | minor (+0.1.0) |
| feat!: / BREAKING: | major (+1.0.0) |

---

## åŠ è½½ç­–ç•¥

```
skills/dev/
â”œâ”€â”€ SKILL.md        â† ä½ åœ¨è¿™é‡Œï¼ˆå…¥å£ + æµç¨‹æ€»è§ˆï¼‰
â”œâ”€â”€ steps/          â† æ¯æ­¥è¯¦æƒ…ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
â”‚   â”œâ”€â”€ 01-prd.md
â”‚   â”œâ”€â”€ 02-detect.md
â”‚   â”œâ”€â”€ 03-branch.md
â”‚   â”œâ”€â”€ 04-dod.md       â† QA Decision Node
â”‚   â”œâ”€â”€ 05-code.md
â”‚   â”œâ”€â”€ 06-test.md
â”‚   â”œâ”€â”€ 07-quality.md   â† Audit Node
â”‚   â”œâ”€â”€ 08-pr.md
â”‚   â”œâ”€â”€ 09-ci.md
â”‚   â”œâ”€â”€ 10-learning.md
â”‚   â””â”€â”€ 11-cleanup.md
â””â”€â”€ scripts/        â† è¾…åŠ©è„šæœ¬
    â”œâ”€â”€ cleanup.sh
    â”œâ”€â”€ check.sh
    â””â”€â”€ ...
```

---

## äº§ç‰©æ£€æŸ¥æ¸…å•

| äº§ç‰© | ä½ç½® | è§„èŒƒæ¥æº | Gate æ£€æŸ¥ |
|------|------|----------|-----------|
| PRD | .prd.md | - | âœ… å­˜åœ¨ + å†…å®¹æœ‰æ•ˆ |
| QA å†³ç­– | docs/QA-DECISION.md | skills/qa/SKILL.md | âœ… å­˜åœ¨ |
| DoD | .dod.md | - | âœ… å­˜åœ¨ + å¼•ç”¨ QA å†³ç­– |
| å®¡è®¡æŠ¥å‘Š | docs/AUDIT-REPORT.md | skills/audit/SKILL.md | âœ… å­˜åœ¨ + PASS |

---

## çŠ¶æ€è¿½è¸ªï¼ˆCore/Notion åŒæ­¥ï¼‰

æœ‰å¤´å’Œæ— å¤´æ¨¡å¼å…±ç”¨åŒä¸€å¥—è¿½è¸ªæœºåˆ¶ï¼Œåœ¨å…³é”®ç‚¹è°ƒç”¨ `track.sh`ï¼š

```bash
# æ–°ä»»åŠ¡å¼€å§‹æ—¶
bash skills/dev/scripts/track.sh start "$(basename "$(pwd)")" "$(git rev-parse --abbrev-ref HEAD)" ".prd.md"

# æ¯ä¸ªæ­¥éª¤
bash skills/dev/scripts/track.sh step 1 "PRD"
bash skills/dev/scripts/track.sh step 2 "Detect"
bash skills/dev/scripts/track.sh step 3 "Branch"
bash skills/dev/scripts/track.sh step 4 "DoD"
bash skills/dev/scripts/track.sh step 5 "Code"
bash skills/dev/scripts/track.sh step 6 "Test"
bash skills/dev/scripts/track.sh step 7 "Quality"
bash skills/dev/scripts/track.sh step 8 "PR"
bash skills/dev/scripts/track.sh step 9 "CI"
bash skills/dev/scripts/track.sh step 10 "Learning"
bash skills/dev/scripts/track.sh step 11 "Cleanup"

# å®Œæˆæ—¶
bash skills/dev/scripts/track.sh done "$PR_URL"

# å¤±è´¥æ—¶
bash skills/dev/scripts/track.sh fail "Error message"
```

è¿½è¸ªæ–‡ä»¶ `.cecelia-run-id` è‡ªåŠ¨ç®¡ç†ï¼ŒCore æ˜¯ä¸»æ•°æ®æºï¼ŒNotion æ˜¯é•œåƒã€‚

---

## å¤š Feature æ”¯æŒï¼ˆå¯é€‰ï¼‰

### ä½¿ç”¨åœºæ™¯

- **ç®€å•ä»»åŠ¡**ï¼šå½“å‰å• PR æµç¨‹ï¼ˆè‡ªåŠ¨åˆ¤æ–­ï¼‰
- **å¤æ‚ä»»åŠ¡**ï¼šå¤§ PRD â†’ æ‹†åˆ† N ä¸ª Features â†’ N ä¸ª PR

### çŠ¶æ€æ–‡ä»¶

`.claude/multi-feature-state.local.md` è®°å½•è¿›åº¦ï¼š

```yaml
---
features:
  - id: 1
    title: "ç”¨æˆ·ç™»å½•åŸºç¡€åŠŸèƒ½"
    status: completed
    pr: "#123"
    branch: "cp-01240101-login-basic"
    feedback: "ç™»å½•æˆåŠŸï¼Œä½†é”™è¯¯æç¤ºä¸å¤Ÿå‹å¥½"

  - id: 2
    title: "ä¼˜åŒ–ç™»å½•é”™è¯¯æç¤º"
    status: in_progress
    branch: "cp-01240102-login-errors"

  - id: 3
    title: "æ·»åŠ è®°ä½æˆ‘åŠŸèƒ½"
    status: pending
---

## Feature 1: ç”¨æˆ·ç™»å½•åŸºç¡€åŠŸèƒ½ âœ…

**Branch**: cp-01240101-login-basic
**PR**: #123
**Status**: Merged to develop

**åé¦ˆ**ï¼š
- ç™»å½•æˆåŠŸ
- é”™è¯¯æç¤ºä¸å¤Ÿå‹å¥½ â†’ Feature 2 å¤„ç†

## Feature 2: ä¼˜åŒ–ç™»å½•é”™è¯¯æç¤º ğŸš§

**Branch**: cp-01240102-login-errors
**Status**: In Progress

**åŸºäº Feature 1 åé¦ˆ**ï¼š
- æ”¹è¿›é”™è¯¯æ¶ˆæ¯æ–‡æ¡ˆ
- æ·»åŠ é”™è¯¯ç±»å‹åŒºåˆ†

## Feature 3: æ·»åŠ è®°ä½æˆ‘åŠŸèƒ½ â³

**Status**: Pending
**ä¾èµ–**: Feature 2 å®Œæˆ
```

### ç»§ç»­å‘½ä»¤

Feature N å®Œæˆåï¼Œè¿è¡Œï¼š

```bash
/dev continue
```

/dev è‡ªåŠ¨ï¼š
1. è¯»å–çŠ¶æ€æ–‡ä»¶æ‰¾åˆ°ä¸‹ä¸€ä¸ª pending feature
2. æ‹‰å–æœ€æ–° developï¼ˆåŒ…å«å‰é¢ features çš„ä»£ç ï¼‰
3. åˆ›å»ºæ–°åˆ†æ”¯å¼€å§‹ä¸‹ä¸€ä¸ª feature
4. å¼•ç”¨ä¸Šä¸€ä¸ª feature çš„åé¦ˆ

### å‘åå…¼å®¹

ç®€å•ä»»åŠ¡ä»èµ°å• PR æµç¨‹ï¼Œ/dev è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦æ‹†åˆ†ã€‚

---

## å®Œæˆåº¦æ£€æŸ¥

**Cleanup åè¿è¡Œ**ï¼š

```bash
bash skills/dev/scripts/check.sh "$BRANCH_NAME" "$BASE_BRANCH"
```
