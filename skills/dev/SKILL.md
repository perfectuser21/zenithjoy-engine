---
name: dev
description: |
  ç»Ÿä¸€å¼€å‘å·¥ä½œæµå…¥å£ã€‚ä¸€ä¸ªå¯¹è¯å®Œæˆæ•´ä¸ªå¼€å‘æµç¨‹ã€‚

  è§¦å‘æ¡ä»¶ï¼š
  - ç”¨æˆ·è¯´ä»»ä½•å¼€å‘ç›¸å…³çš„éœ€æ±‚
  - ç”¨æˆ·è¯´ /dev
  - Hook è¾“å‡º [SKILL_REQUIRED: dev]
---

# /dev - ç»Ÿä¸€å¼€å‘å·¥ä½œæµ

## 10 æ­¥æµç¨‹

| Step | å†…å®¹ | è¯¦æƒ… |
|------|------|------|
| 1 | å‡†å¤‡ï¼ˆä¾èµ–+åˆ†æ”¯+ä¸Šä¸‹æ–‡ï¼‰| â†’ [01-prepare.md](steps/01-prepare.md) |
| 2 | PRD | â†’ [02-prd.md](steps/02-prd.md) |
| 3 | DoD | â†’ [03-dod.md](steps/03-dod.md) |
| 4 | å†™ä»£ç  | â†’ [04-code.md](steps/04-code.md) |
| 5 | å†™æµ‹è¯• | â†’ [05-test.md](steps/05-test.md) |
| 6 | æœ¬åœ°æµ‹è¯• | â†’ [06-local-test.md](steps/06-local-test.md) |
| 7 | æäº¤ PR | â†’ [07-pr.md](steps/07-pr.md) |
| 8 | CI é€šè¿‡ | â†’ [08-ci-review.md](steps/08-ci-review.md) |
| 9 | åˆå¹¶ | â†’ [09-merge.md](steps/09-merge.md) |
| 10 | Cleanup | â†’ [10-cleanup.md](steps/10-cleanup.md) |

---

## æµç¨‹å›¾ï¼ˆä¸€ä¸ªå¯¹è¯å®Œæˆï¼‰

```
/dev å¼€å§‹
    â”‚
    â–¼
Step 1-3: å‡†å¤‡ + PRD + DoDï¼ˆç”¨æˆ·ç¡®è®¤ï¼‰
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Loop: Step 4-6                           â”‚
â”‚                                           â”‚
â”‚  Step 4: å†™ä»£ç                            â”‚
â”‚      â†“                                    â”‚
â”‚  Step 5: å†™æµ‹è¯•                           â”‚
â”‚      â†“                                    â”‚
â”‚  Step 6: è·‘æµ‹è¯•                           â”‚
â”‚      â”‚                                    â”‚
â”‚      â”œâ”€â”€ å¤±è´¥ â†’ step=3ï¼Œå›åˆ° Step 4 ç»§ç»­  â”‚
â”‚      â”‚                                    â”‚
â”‚      â””â”€â”€ é€šè¿‡ â†“                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
Step 7: gh pr create
    â”‚
    â”œâ”€â”€ pr-gate.sh æ‹¦æˆª
    â”‚       â”‚
    â”‚       â”œâ”€â”€ å¤±è´¥ â†’ step=3ï¼Œå¾ªç¯ 4â†’5â†’6
    â”‚       â”‚
    â”‚       â””â”€â”€ é€šè¿‡ â†’ PR åˆ›å»ºæˆåŠŸ
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Loop: Step 8                             â”‚
â”‚                                           â”‚
â”‚  ç­‰ CI                                    â”‚
â”‚      â”‚                                    â”‚
â”‚      â”œâ”€â”€ å¤±è´¥ â†’ step=3ï¼Œä¿®å¤ â†’ push        â”‚
â”‚      â”‚                                    â”‚
â”‚      â””â”€â”€ é€šè¿‡ â†“                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
Step 9: åˆå¹¶
    â”‚
    â–¼
Step 10: Cleanup
    â”‚
    â–¼
å®Œæˆ ğŸ‰
```

**å…³é”®**ï¼šæ•´ä¸ªæµç¨‹åœ¨ä¸€ä¸ªå¯¹è¯ä¸­å®Œæˆï¼Œå¤±è´¥æ—¶è‡ªåŠ¨å¾ªç¯ï¼Œä¸æ–­å¼€ã€‚

---

## æ ¸å¿ƒè§„åˆ™

1. **åªåœ¨ cp-* æˆ– feature/* åˆ†æ”¯å†™ä»£ç ** - Hook å¼•å¯¼
2. **æ­¥éª¤çŠ¶æ€æœº** - Hook æ£€æŸ¥ `git config branch.*.step`ï¼Œstep >= 3 æ‰èƒ½å†™ä»£ç 
3. **develop æ˜¯ä¸»å¼€å‘çº¿** - PR åˆå¹¶å› develop
4. **main å§‹ç»ˆç¨³å®š** - åªåœ¨é‡Œç¨‹ç¢‘æ—¶ä» develop åˆå¹¶
5. **CI æ˜¯å”¯ä¸€å¼ºåˆ¶æ£€æŸ¥** - å…¶ä»–éƒ½æ˜¯å¼•å¯¼

---

## æ­¥éª¤çŠ¶æ€æœº

ç”¨ `git config branch.cp-xxx.step` è¿½è¸ªå½“å‰æ­¥éª¤ï¼š

| step | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| 1 | å‡†å¤‡å®Œæˆ | åˆ†æ”¯å·²åˆ›å»º |
| 2 | PRD å®Œæˆ | ç”¨æˆ·ç¡®è®¤ PRD |
| 3 | DoD å®Œæˆ | ç”¨æˆ·ç¡®è®¤ DoDï¼Œ**å¯ä»¥å†™ä»£ç ** |
| 4 | ä»£ç å®Œæˆ | åŠŸèƒ½ä»£ç å†™å®Œ |
| 5 | æµ‹è¯•å®Œæˆ | æµ‹è¯•ä»£ç å†™å®Œ |
| 6 | æœ¬åœ°æµ‹è¯•é€šè¿‡ | npm test ç»¿ï¼Œ**å¯ä»¥æäº¤** |
| 7 | PR å·²åˆ›å»º | ç­‰å¾… CI |
| 8 | CI é€šè¿‡ | è´¨æ£€å®Œæˆ |
| 9 | å·²åˆå¹¶ | PR merged |
| 10 | å·²æ¸…ç† | åˆ†æ”¯åˆ é™¤ |

### Hook å¼•å¯¼

**branch-protect.sh** (PreToolUse - Write/Edit):
- å¼•å¯¼ step >= 3 æ‰èƒ½å†™ä»£ç 
- å¼•å¯¼åªåœ¨ cp-* æˆ– feature/* åˆ†æ”¯å†™ä»£ç 

**pr-gate.sh** (PreToolUse - Bash):
- æ‹¦æˆª `gh pr create`ï¼Œè¿è¡Œè´¨æ£€
- å¤±è´¥æ—¶å›é€€åˆ° step 3ï¼Œå¼•å¯¼ä¿®å¤åé‡è¯•

**stop-gate.sh** (Stop):
- é€€å‡ºæ—¶æ£€æŸ¥ä»»åŠ¡å®Œæˆåº¦
- æ˜¾ç¤ºè¿›åº¦å»ºè®®

**project-detect.sh** (PostToolUse - Bash):
- æ£€æµ‹é¡¹ç›®åˆå§‹åŒ–çŠ¶æ€
- ç”Ÿæˆ .project-info.json

**session-init.sh** (SessionStart):
- ä¼šè¯åˆå§‹åŒ–ï¼Œæ¢å¤ä¸Šä¸‹æ–‡
- è¯»å–å·²ä¿å­˜çš„æ­¥éª¤çŠ¶æ€

**æ³¨æ„**ï¼šæ‰€æœ‰ Hook éƒ½æ˜¯å¼•å¯¼æ€§çš„ï¼ŒCI æ˜¯å”¯ä¸€å¼ºåˆ¶æ£€æŸ¥ã€‚

---

## å¿«é€Ÿä¿®å¤æ¨¡å¼

**é€‚ç”¨æ¡ä»¶**ï¼ˆå…¨éƒ¨æ»¡è¶³ï¼‰ï¼š
- `fix:` ç±»å‹ä¿®å¤
- å•æ–‡ä»¶æˆ–å°‘é‡æ”¹åŠ¨
- éœ€æ±‚æ˜ç¡®

**å¯è·³è¿‡**ï¼šStep 1.4 ä¸Šä¸‹æ–‡å›é¡¾

---

## ç‰ˆæœ¬å·è§„åˆ™ (semver)

| commit ç±»å‹ | ç‰ˆæœ¬å˜åŒ– |
|-------------|----------|
| fix: | patch (+0.0.1) |
| feat: | minor (+0.1.0) |
| feat!: / BREAKING: | major (+1.0.0) |

---

## åŠ è½½ç­–ç•¥

```
skills/dev/
â”œâ”€â”€ SKILL.md        â† ä½ åœ¨è¿™é‡Œï¼ˆå…¥å£ï¼‰
â”œâ”€â”€ steps/          â† æ¯æ­¥ä¸€ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ 01-prepare.md
â”‚   â”œâ”€â”€ 02-prd.md
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ 10-cleanup.md
â””â”€â”€ scripts/        â† è¾…åŠ©è„šæœ¬
    â”œâ”€â”€ cleanup.sh
    â”œâ”€â”€ check.sh
    â”œâ”€â”€ wait-for-merge.sh
    â”œâ”€â”€ scan-change-level.sh
    â””â”€â”€ multi-feature.sh
```

**æ‰§è¡Œæ—¶æŒ‰éœ€åŠ è½½å¯¹åº”æ­¥éª¤æ–‡ä»¶ï¼Œå‡å°‘ä¸Šä¸‹æ–‡å¼€é”€ã€‚**

---

## å®Œæˆåº¦æ£€æŸ¥

**Cleanup åè¿è¡Œ**ï¼š

```bash
bash skills/dev/scripts/check.sh "$BRANCH_NAME" "$BASE_BRANCH"
```
