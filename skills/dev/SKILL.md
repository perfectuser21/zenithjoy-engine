---
name: dev
version: 2.0.0
updated: 2026-01-24
description: |
  ç»Ÿä¸€å¼€å‘å·¥ä½œæµå…¥å£ï¼ˆä¸¤é˜¶æ®µ + äº‹ä»¶é©±åŠ¨ï¼‰ã€‚

  è§¦å‘æ¡ä»¶ï¼š
  - ç”¨æˆ·è¯´ä»»ä½•å¼€å‘ç›¸å…³çš„éœ€æ±‚
  - ç”¨æˆ·è¯´ /dev
  - Hook è¾“å‡º [SKILL_REQUIRED: dev]

  v2.0.0 å˜æ›´ï¼š
  - ä¸¤é˜¶æ®µåˆ†ç¦»ï¼šp0 (å‘ PR) + p1 (ä¿® CI)
  - Stop Hook å¼ºåˆ¶è´¨æ£€ï¼ˆä¼šè¯ç»“æŸæ—¶å¼ºåˆ¶ï¼‰
  - äº‹ä»¶é©±åŠ¨å¾ªç¯ï¼ˆä¸æŒ‚ç€ç­‰å¾…ï¼‰
---

# /dev - ç»Ÿä¸€å¼€å‘å·¥ä½œæµï¼ˆv2.0ï¼‰

## æ ¸å¿ƒå®šä½

**æµç¨‹ç¼–æ’è€… + ä¸¤é˜¶æ®µåˆ†ç¦»**ï¼š
- é˜¶æ®µæ£€æµ‹ â†’ `scripts/detect-phase.sh`
- è´¨æ£€å¼ºåˆ¶ â†’ `hooks/stop.sh` (Stop Hook)
- æ”¾è¡Œåˆ¤æ–­ â†’ `hooks/pr-gate-v2.sh` (PreToolUse:Bash)

åˆ¤æ–­ç”±ä¸“é—¨çš„è§„èŒƒè´Ÿè´£ï¼š
- æµ‹è¯•å†³ç­– â†’ å‚è€ƒ `skills/qa/SKILL.md`
- ä»£ç å®¡è®¡ â†’ å‚è€ƒ `skills/audit/SKILL.md`

---

## å…¥å£ï¼šé˜¶æ®µæ£€æµ‹ï¼ˆä¸¤é˜¶æ®µï¼‰

**è¿›å…¥ /dev åï¼Œé¦–å…ˆè¿è¡Œé˜¶æ®µæ£€æµ‹**ï¼š

```bash
# è¿è¡Œé˜¶æ®µæ£€æµ‹
bash scripts/detect-phase.sh

# è¾“å‡ºæ ¼å¼
# PHASE: p0 / p1 / p2 / pending / unknown
# DESCRIPTION: ...
# ACTION: ...
```

### é˜¶æ®µå®šä¹‰

| é˜¶æ®µ | æ¡ä»¶ | ç›®æ ‡ | ç­–ç•¥ |
|------|------|------|------|
| **p0** | æ—  PR | å‘ PR | è´¨æ£€å¾ªç¯ â†’ åˆ›å»º PR â†’ ç»“æŸï¼ˆä¸ç­‰ CIï¼‰|
| **p1** | PR + CI fail | ä¿®åˆ° CI ç»¿ | äº‹ä»¶é©±åŠ¨å¾ªç¯ï¼šä¿®å¤ â†’ push â†’ é€€å‡º â†’ ç­‰å”¤é†’ |
| **p2** | PR + CI pass | ä¸ä»‹å…¥ | ç›´æ¥é€€å‡ºï¼ˆGitHub è‡ªåŠ¨ mergeï¼‰|
| **pending** | PR + CI pending | - | ç›´æ¥é€€å‡ºï¼ˆç¨åå†æŸ¥ï¼‰|
| **unknown** | gh API é”™è¯¯ | - | ç›´æ¥é€€å‡ºï¼ˆä¸è¯¯åˆ¤ï¼‰|

**è¯¦ç»†æ–‡æ¡£**: `docs/PHASE-DETECTION.md`

---

## æµç¨‹èŠ‚ç‚¹ï¼ˆä¸¤é˜¶æ®µåˆ†ç¦»ï¼‰

### p0 é˜¶æ®µï¼šPublishedï¼ˆå‘ PR ä¹‹å‰ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 p0: Published é˜¶æ®µ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  é˜¶æ®µæ£€æµ‹ (scripts/detect-phase.sh)                     â”‚
â”‚      â†’ PHASE: p0                                        â”‚
â”‚      â†“                                                  â”‚
â”‚  PRD ç¡®å®š (01-prd.md)                                   â”‚
â”‚      â†“                                                  â”‚
â”‚  ç¯å¢ƒæ£€æµ‹ (02-detect.md)                                â”‚
â”‚      â†“                                                  â”‚
â”‚  åˆ†æ”¯åˆ›å»º (03-branch.md)                                â”‚
â”‚      â†“                                                  â”‚
â”‚  DoD å®šç¨¿ (04-dod.md)                                   â”‚
â”‚      â”‚   å« QA Decision Node                            â”‚
â”‚      â”‚   äº§ç‰©: docs/QA-DECISION.md                      â”‚
â”‚      â†“                                                  â”‚
â”‚  å†™ä»£ç  + å†™æµ‹è¯• (05-code.md, 06-test.md)               â”‚
â”‚      â†“                                                  â”‚
â”‚  è´¨æ£€å¾ªç¯ (07-quality.md) â† Stop Hook å¼ºåˆ¶              â”‚
â”‚      â”‚   L2A: Audit (Decision: PASS)                    â”‚
â”‚      â”‚   L1: npm run qa:gate                            â”‚
â”‚      â”‚   å¤±è´¥ â†’ ä¿®å¤ â†’ é‡è¯•ï¼ˆè´¨æ£€å¾ªç¯ï¼‰                 â”‚
â”‚      â†“                                                  â”‚
â”‚  æäº¤ PR (08-pr.md)                                     â”‚
â”‚      â”‚   Stop Hook: PR åˆ›å»ºåç«‹å³ç»“æŸ                   â”‚
â”‚      â”‚   ä¸æ£€æŸ¥ CIï¼ˆp0 ä¸ç­‰å¾… CIï¼‰                      â”‚
â”‚      â†“                                                  â”‚
â”‚  ç»“æŸå¯¹è¯ âœ… ï¼ˆä¸ç­‰ CIï¼‰                                 â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### p1 é˜¶æ®µï¼šCI fail ä¿®å¤ï¼ˆäº‹ä»¶é©±åŠ¨å¾ªç¯ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            p1: CI fail ä¿®å¤ï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  é˜¶æ®µæ£€æµ‹ (scripts/detect-phase.sh)                     â”‚
â”‚      â†’ PHASE: p1                                        â”‚
â”‚      â†“                                                  â”‚
â”‚  CI ä¿®å¤å¾ªç¯ (09-ci.md) â† Stop Hook å¼ºåˆ¶                â”‚
â”‚      â”‚   1. æ‹‰å– CI å¤±è´¥è¯¦æƒ…                            â”‚
â”‚      â”‚      gh pr checks <PR> --json ...                â”‚
â”‚      â”‚   2. åˆ†æå¤±è´¥åŸå› ï¼ˆtypecheck/test/buildï¼‰        â”‚
â”‚      â”‚   3. ä¿®å¤é—®é¢˜                                    â”‚
â”‚      â”‚   4. push ä»£ç                                    â”‚
â”‚      â”‚   5. å°è¯•ç»“æŸ                                    â”‚
â”‚      â”‚      Stop Hook:                                  â”‚
â”‚      â”‚        CI fail â†’ exit 2ï¼ˆç»§ç»­ä¿®ï¼‰                â”‚
â”‚      â”‚        CI pending â†’ exit 0ï¼ˆé€€å‡ºï¼Œç­‰å”¤é†’ï¼‰       â”‚
â”‚      â”‚        CI pass â†’ exit 0ï¼ˆç»“æŸï¼‰                  â”‚
â”‚      â†“                                                  â”‚
â”‚  ç»“æŸå¯¹è¯ âœ… ï¼ˆGitHub è‡ªåŠ¨ mergeï¼‰                       â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### p2 é˜¶æ®µï¼šCI passï¼ˆå·²å®Œæˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    p2: CI pass                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é˜¶æ®µæ£€æµ‹ â†’ PHASE: p2                                   â”‚
â”‚  ç›´æ¥é€€å‡º âœ… ï¼ˆGitHub è‡ªåŠ¨ mergeï¼‰                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### pending / unknownï¼šä¸­é—´æ€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 pending / unknown                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  pending: CI è¿è¡Œä¸­ â†’ ç›´æ¥é€€å‡ºï¼ˆç¨åå†æŸ¥ï¼‰              â”‚
â”‚  unknown: gh API é”™è¯¯ â†’ ç›´æ¥é€€å‡ºï¼ˆä¸è¯¯åˆ¤ï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒè§„åˆ™ï¼ˆv2.0ï¼‰

### 1. ä¸¤é˜¶æ®µåˆ†ç¦» âœ…

```
p0: å‘ PR â†’ ç»“æŸï¼ˆä¸ç­‰ CIï¼‰
p1: ä¿® CI â†’ ç»“æŸï¼ˆä¸ç­‰ mergeï¼‰
p2: ç›´æ¥é€€å‡ºï¼ˆGitHub è‡ªåŠ¨ mergeï¼‰
```

### 2. Stop Hook å¼ºåˆ¶è´¨æ£€ âœ…

```
p0: è´¨æ£€æœªé€šè¿‡ OR PR æœªåˆ›å»º â†’ exit 2ï¼ˆç»§ç»­ï¼‰
p1: CI fail â†’ exit 2ï¼ˆç»§ç»­ä¿®ï¼‰
    CI pending â†’ exit 0ï¼ˆé€€å‡ºï¼Œç­‰å”¤é†’ï¼‰
    CI pass â†’ exit 0ï¼ˆç»“æŸï¼‰
```

### 3. äº‹ä»¶é©±åŠ¨å¾ªç¯ âœ…

```
âŒ ä¸æŒ‚ç€ç­‰å¾…: while CI pending; do sleep; done
âœ… push åé€€å‡º: push â†’ exit 0 â†’ ç­‰ä¸‹æ¬¡å”¤é†’
```

### 4. åˆ†æ”¯ç­–ç•¥

1. **åªåœ¨ cp-* æˆ– feature/* åˆ†æ”¯å†™ä»£ç ** - Hook å¼ºåˆ¶
2. **develop æ˜¯ä¸»å¼€å‘çº¿** - PR åˆå¹¶å› develop
3. **main å§‹ç»ˆç¨³å®š** - åªåœ¨é‡Œç¨‹ç¢‘æ—¶ä» develop åˆå¹¶

### 5. äº§ç‰©é—¨æ§

- QA-DECISION.mdï¼ˆStep 4 ç”Ÿæˆï¼‰
- AUDIT-REPORT.mdï¼ˆStep 7 ç”Ÿæˆï¼ŒDecision: PASSï¼‰
- .quality-gate-passedï¼ˆStep 7 ç”Ÿæˆï¼Œæµ‹è¯•é€šè¿‡ï¼‰

---

## ç‰ˆæœ¬å·è§„åˆ™ (semver)

| commit ç±»å‹ | ç‰ˆæœ¬å˜åŒ– |
|-------------|----------|
| fix: | patch (+0.0.1) |
| feat: | minor (+0.1.0) |
| feat!: / BREAKING: | major (+1.0.0) |

---

## åŠ è½½ç­–ç•¥

```
skills/dev/
â”œâ”€â”€ SKILL.md        â† ä½ åœ¨è¿™é‡Œï¼ˆå…¥å£ + æµç¨‹æ€»è§ˆï¼‰
â”œâ”€â”€ steps/          â† æ¯æ­¥è¯¦æƒ…ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
â”‚   â”œâ”€â”€ 01-prd.md
â”‚   â”œâ”€â”€ 02-detect.md
â”‚   â”œâ”€â”€ 03-branch.md
â”‚   â”œâ”€â”€ 04-dod.md       â† QA Decision Node
â”‚   â”œâ”€â”€ 05-code.md
â”‚   â”œâ”€â”€ 06-test.md
â”‚   â”œâ”€â”€ 07-quality.md   â† Audit Node
â”‚   â”œâ”€â”€ 08-pr.md
â”‚   â”œâ”€â”€ 09-ci.md
â”‚   â”œâ”€â”€ 10-learning.md
â”‚   â””â”€â”€ 11-cleanup.md
â””â”€â”€ scripts/        â† è¾…åŠ©è„šæœ¬
    â”œâ”€â”€ cleanup.sh
    â”œâ”€â”€ check.sh
    â””â”€â”€ ...
```

---

## äº§ç‰©æ£€æŸ¥æ¸…å•

| äº§ç‰© | ä½ç½® | è§„èŒƒæ¥æº | Gate æ£€æŸ¥ |
|------|------|----------|-----------|
| PRD | .prd.md | - | âœ… å­˜åœ¨ + å†…å®¹æœ‰æ•ˆ |
| QA å†³ç­– | docs/QA-DECISION.md | skills/qa/SKILL.md | âœ… å­˜åœ¨ |
| DoD | .dod.md | - | âœ… å­˜åœ¨ + å¼•ç”¨ QA å†³ç­– |
| å®¡è®¡æŠ¥å‘Š | docs/AUDIT-REPORT.md | skills/audit/SKILL.md | âœ… å­˜åœ¨ + PASS |

---

## çŠ¶æ€è¿½è¸ªï¼ˆCore/Notion åŒæ­¥ï¼‰

æœ‰å¤´å’Œæ— å¤´æ¨¡å¼å…±ç”¨åŒä¸€å¥—è¿½è¸ªæœºåˆ¶ï¼Œåœ¨å…³é”®ç‚¹è°ƒç”¨ `track.sh`ï¼š

```bash
# æ–°ä»»åŠ¡å¼€å§‹æ—¶
bash skills/dev/scripts/track.sh start "$(basename "$(pwd)")" "$(git rev-parse --abbrev-ref HEAD)" ".prd.md"

# æ¯ä¸ªæ­¥éª¤
bash skills/dev/scripts/track.sh step 1 "PRD"
bash skills/dev/scripts/track.sh step 2 "Detect"
bash skills/dev/scripts/track.sh step 3 "Branch"
bash skills/dev/scripts/track.sh step 4 "DoD"
bash skills/dev/scripts/track.sh step 5 "Code"
bash skills/dev/scripts/track.sh step 6 "Test"
bash skills/dev/scripts/track.sh step 7 "Quality"
bash skills/dev/scripts/track.sh step 8 "PR"
bash skills/dev/scripts/track.sh step 9 "CI"
bash skills/dev/scripts/track.sh step 10 "Learning"
bash skills/dev/scripts/track.sh step 11 "Cleanup"

# å®Œæˆæ—¶
bash skills/dev/scripts/track.sh done "$PR_URL"

# å¤±è´¥æ—¶
bash skills/dev/scripts/track.sh fail "Error message"
```

è¿½è¸ªæ–‡ä»¶ `.cecelia-run-id` è‡ªåŠ¨ç®¡ç†ï¼ŒCore æ˜¯ä¸»æ•°æ®æºï¼ŒNotion æ˜¯é•œåƒã€‚

---

## å¤š Feature æ”¯æŒï¼ˆå¯é€‰ï¼‰

### ä½¿ç”¨åœºæ™¯

- **ç®€å•ä»»åŠ¡**ï¼šå½“å‰å• PR æµç¨‹ï¼ˆè‡ªåŠ¨åˆ¤æ–­ï¼‰
- **å¤æ‚ä»»åŠ¡**ï¼šå¤§ PRD â†’ æ‹†åˆ† N ä¸ª Features â†’ N ä¸ª PR

### çŠ¶æ€æ–‡ä»¶

`.claude/multi-feature-state.local.md` è®°å½•è¿›åº¦ï¼š

```yaml
---
features:
  - id: 1
    title: "ç”¨æˆ·ç™»å½•åŸºç¡€åŠŸèƒ½"
    status: completed
    pr: "#123"
    branch: "cp-01240101-login-basic"
    feedback: "ç™»å½•æˆåŠŸï¼Œä½†é”™è¯¯æç¤ºä¸å¤Ÿå‹å¥½"

  - id: 2
    title: "ä¼˜åŒ–ç™»å½•é”™è¯¯æç¤º"
    status: in_progress
    branch: "cp-01240102-login-errors"

  - id: 3
    title: "æ·»åŠ è®°ä½æˆ‘åŠŸèƒ½"
    status: pending
---

## Feature 1: ç”¨æˆ·ç™»å½•åŸºç¡€åŠŸèƒ½ âœ…

**Branch**: cp-01240101-login-basic
**PR**: #123
**Status**: Merged to develop

**åé¦ˆ**ï¼š
- ç™»å½•æˆåŠŸ
- é”™è¯¯æç¤ºä¸å¤Ÿå‹å¥½ â†’ Feature 2 å¤„ç†

## Feature 2: ä¼˜åŒ–ç™»å½•é”™è¯¯æç¤º ğŸš§

**Branch**: cp-01240102-login-errors
**Status**: In Progress

**åŸºäº Feature 1 åé¦ˆ**ï¼š
- æ”¹è¿›é”™è¯¯æ¶ˆæ¯æ–‡æ¡ˆ
- æ·»åŠ é”™è¯¯ç±»å‹åŒºåˆ†

## Feature 3: æ·»åŠ è®°ä½æˆ‘åŠŸèƒ½ â³

**Status**: Pending
**ä¾èµ–**: Feature 2 å®Œæˆ
```

### ç»§ç»­å‘½ä»¤

Feature N å®Œæˆåï¼Œè¿è¡Œï¼š

```bash
/dev continue
```

/dev è‡ªåŠ¨ï¼š
1. è¯»å–çŠ¶æ€æ–‡ä»¶æ‰¾åˆ°ä¸‹ä¸€ä¸ª pending feature
2. æ‹‰å–æœ€æ–° developï¼ˆåŒ…å«å‰é¢ features çš„ä»£ç ï¼‰
3. åˆ›å»ºæ–°åˆ†æ”¯å¼€å§‹ä¸‹ä¸€ä¸ª feature
4. å¼•ç”¨ä¸Šä¸€ä¸ª feature çš„åé¦ˆ

### å‘åå…¼å®¹

ç®€å•ä»»åŠ¡ä»èµ°å• PR æµç¨‹ï¼Œ/dev è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦æ‹†åˆ†ã€‚

---

## å®Œæˆåº¦æ£€æŸ¥

**Cleanup åè¿è¡Œ**ï¼š

```bash
bash skills/dev/scripts/check.sh "$BRANCH_NAME" "$BASE_BRANCH"
```
